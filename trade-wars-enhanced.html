<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Торговые войны - Экономическая симуляция</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- Пасхалка дракон -->
    <div id="dragonEasterEgg" class="dragon-easter-egg hidden">
        <div class="dragon-ascii">
______________
|     /      |
|   R6TR0    /
|  /\  /\   |
|___________|
|  ( . . )  |&lt;===|
|   \ U /   |
|___\_______|
|     .     |
| LEGENDARY |
| DEVELOPER |
|___________|
        </div>
        <div class="dragon-signature">R6TR0</div>
        <div class="dragon-title">LEGENDARY DEVELOPER</div>
    </div>

    <!-- Стартовый экран -->
    <div id="startScreen" class="screen active">
        <div class="container">
            <div class="header-top">
                <div class="logo-section" id="logoSection">
                    <div class="company-logo">
                        <img src="https://www.fa.ru/org/faculty/meo/SiteAssets/favicon.ico" alt="Финансовый университет" style="width: 60px; height: 60px; border-radius: 8px;">
                        <div class="game-brand">
                            <h1 class="game-title">
                                <i class="fas fa-globe-americas"></i>
                                Торговые войны
                            </h1>
                            <p class="game-subtitle">Ты — экономический советник</p>
                        </div>
                    </div>
                    <div class="version-info">v2.5.0</div>
                </div>
                <button id="themeToggle" class="theme-toggle" onclick="toggleTheme()">
                    <i class="fas fa-circle-half-stroke"></i>
                </button>
            </div>

            <div class="start-layout">
                <div class="start-left-column">
                    <!-- Информационные карточки -->
                    <div class="game-info-cards">
                        <div class="info-card">
                            <i class="fas fa-clock"></i>
                            <h3>Время игры</h3>
                            <p>≈ 25 минут</p>
                        </div>
                        <div class="info-card">
                            <i class="fas fa-chess"></i>
                            <h3>Количество ходов</h3>
                            <p>15-100 (режим)</p>
                        </div>
                        <div class="info-card">
                            <i class="fas fa-random"></i>
                            <h3>Случайные события</h3>
                            <p>Динамично</p>
                        </div>
                    </div>

                    <!-- Правила игры -->
                    <div class="rules-section">
                        <h2><i class="fas fa-book"></i> Правила игры</h2>
                        <div class="rules-list">
                            <div class="rule-item">
                                <span class="rule-number">1</span>
                                <div class="rule-content">
                                    <h4>Выберите страну</h4>
                                    <p>Каждая страна имеет уникальные специализации и сложность игры</p>
                                </div>
                            </div>
                            <div class="rule-item">
                                <span class="rule-number">2</span>
                                <div class="rule-content">
                                    <h4>Выберите режим игры</h4>
                                    <p>Нормальный (фиксированные сценарии), Тяжелый или Слепая игра (случайные)</p>
                                </div>
                            </div>
                            <div class="rule-item">
                                <span class="rule-number">3</span>
                                <div class="rule-content">
                                    <h4>Принимайте решения</h4>
                                    <p>Каждое решение влияет на экономические показатели и доверие партнеров</p>
                                </div>
                            </div>
                            <div class="rule-item">
                                <span class="rule-number">4</span>
                                <div class="rule-content">
                                    <h4>Следите за случайными событиями</h4>
                                    <p>Другие страны могут помочь или помешать вашим решениям</p>
                                </div>
                            </div>
                            <div class="rule-item">
                                <span class="rule-number">5</span>
                                <div class="rule-content">
                                    <h4>Анализируйте результаты</h4>
                                    <p>Получите детальный анализ своей экономической стратегии</p>
                                </div>
                            </div>
                            <div class="rule-item">
                                <span class="rule-number">6</span>
                                <div class="rule-content">
                                    <h4>Напишите ФИО и группу, скачайте результаты</h4>
                                    <p>Сохраните полный отчет в формате PDF для дальнейшего изучения</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="start-right-column">
                    <!-- Информация о показателях -->
                    <div class="indicators-info">
                        <h2>Экономические показатели</h2>
                        <div class="indicators-grid">
                            <div class="indicator-card">
                                <i class="fas fa-chart-line"></i>
                                <h3>ВВП индекс</h3>
                                <p>Базовое значение: 100.0</p>
                            </div>
                            <div class="indicator-card">
                                <i class="fas fa-ship"></i>
                                <h3>Экспорт</h3>
                                <p>Базовое значение: 100.0</p>
                            </div>
                            <div class="indicator-card">
                                <i class="fas fa-boxes"></i>
                                <h3>Импорт</h3>
                                <p>Базовое значение: 100.0</p>
                            </div>
                            <div class="indicator-card">
                                <i class="fas fa-percentage"></i>
                                <h3>Инфляция</h3>
                                <p>Базовое значение: 2.0%</p>
                            </div>
                            <div class="indicator-card">
                                <i class="fas fa-users"></i>
                                <h3>Безработица</h3>
                                <p>Базовое значение: 5.0%</p>
                            </div>
                        </div>
                    </div>

                    <!-- Настройка игры -->
                    <div class="game-setup">
                        <!-- Выбор страны -->
                        <div class="section">
                            <h2><i class="fas fa-flag"></i> Выберите страну</h2>
                            <div id="countriesGrid" class="countries-grid"></div>
                        </div>

                        <!-- Режим игры -->
                        <div class="section">
                            <h2><i class="fas fa-gamepad"></i> Режим игры</h2>
                            <div class="game-modes">
                                <label class="radio-card">
                                    <input type="radio" name="gameMode" value="normal" checked>
                                    <div class="radio-content">
                                        <i class="fas fa-play"></i>
                                        <h3>Нормальный</h3>
                                        <p>15 ходов, видны эффекты решений</p>
                                    </div>
                                </label>
                                <label class="radio-card">
                                    <input type="radio" name="gameMode" value="hard">
                                    <div class="radio-content">
                                        <i class="fas fa-fire"></i>
                                        <h3>Тяжелый</h3>
                                        <p>100 ходов, увеличенные последствия</p>
                                    </div>
                                </label>
                                <label class="radio-card">
                                    <input type="radio" name="gameMode" value="blind">
                                    <div class="radio-content">
                                        <i class="fas fa-eye-slash"></i>
                                        <h3>Слепая игра</h3>
                                        <p>100 ходов, скрыты эффекты решений</p>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Кнопки -->
                        <div class="start-actions">
                            <button id="newGameBtn" class="btn btn--secondary btn--full-width" onclick="newGame()" style="margin-left: 40px;">
                                <i class="fas fa-refresh"></i>
                                Новая игра
                            </button>
                            <button id="startGameBtn" class="btn btn--primary btn--full-width btn--tall" onclick="startGame()" disabled style="margin-left: 40px;">
                                <i class="fas fa-rocket"></i>
                                Начать игру
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Игровой экран -->
    <div id="gameScreen" class="screen">
        <div class="container">
            <!-- Прогресс игры -->
            <div class="game-progress">
                <div class="progress-info">
                    <h1 id="gameTitle">Торговые войны</h1>
                    <p id="turnInfo">Ход 1 из 15</p>
                </div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
            </div>

            <div class="game-layout">
                <div class="game-main">
                    <!-- Панель показателей -->
                    <div id="indicatorsPanel" class="indicators-panel">
                        <div class="indicator" id="gdpIndicator">
                            <i class="fas fa-chart-line"></i>
                            <div>
                                <span class="label">ВВП</span>
                                <span class="value">100.0</span>
                            </div>
                        </div>
                        <div class="indicator" id="expIndicator">
                            <i class="fas fa-ship"></i>
                            <div>
                                <span class="label">Экспорт</span>
                                <span class="value">100.0</span>
                            </div>
                        </div>
                        <div class="indicator" id="impIndicator">
                            <i class="fas fa-boxes"></i>
                            <div>
                                <span class="label">Импорт</span>
                                <span class="value">100.0</span>
                            </div>
                        </div>
                        <div class="indicator" id="cpiIndicator">
                            <i class="fas fa-percentage"></i>
                            <div>
                                <span class="label">Инфляция</span>
                                <span class="value">2.0%</span>
                            </div>
                        </div>
                        <div class="indicator" id="unemploymentIndicator">
                            <i class="fas fa-users"></i>
                            <div>
                                <span class="label">Безработица</span>
                                <span class="value">5.0%</span>
                            </div>
                        </div>
                        <div class="indicator" id="trustIndicator">
                            <i class="fas fa-handshake"></i>
                            <div>
                                <span class="label">Доверие</span>
                                <span class="value">50</span>
                            </div>
                        </div>
                    </div>

                    <!-- Карточка сценария -->
                    <div id="scenarioCard" class="scenario-card">
                        <div class="scenario-header">
                            <h2 id="scenarioTitle">Загрузка сценария...</h2>
                        </div>
                        <div class="scenario-content">
                            <p id="scenarioText">Пожалуйста, подождите...</p>
                        </div>
                    </div>

                    <!-- Случайное событие -->
                    <div id="randomEventCard" class="random-event-card" style="display: none;">
                        <div class="event-header">
                            <h3><i class="fas fa-bolt"></i> Случайное событие</h3>
                        </div>
                        <div class="event-content">
                            <p id="randomEventText"></p>
                        </div>
                    </div>

                    <!-- Варианты выбора -->
                    <div id="choicesContainer" class="choices-container">
                        <!-- Динамически генерируется -->
                    </div>
                </div>

                <div class="game-sidebar">
                    <!-- Панель эффектов -->
                    <div id="effectsPanel" class="effects-panel" style="display: none;">
                        <div class="effects-preview">
                            <h3><i class="fas fa-magic"></i> Предварительные эффекты</h3>
                            <div id="effectsGrid" class="effects-grid"></div>
                        </div>

                        <!-- Экономическая теория -->
                        <div class="economic-theory">
                            <h3><i class="fas fa-graduation-cap"></i> Экономическая теория</h3>
                            <p id="economicTheoryText">Выберите действие для получения теоретической информации.</p>
                        </div>

                        <!-- Историческая справка -->
                        <div class="historical-context">
                            <h3><i class="fas fa-book-open"></i> Исторический пример</h3>
                            <p id="historicalText">Выберите действие для получения исторической информации.</p>
                        </div>

                        <button id="nextTurnBtn" class="btn btn--primary btn--full-width" onclick="nextTurn()" style="display: none;">
                            <i class="fas fa-arrow-right"></i>
                            Следующий ход
                        </button>
                    </div>

                    <!-- Панель графиков -->
                    <div class="charts-panel">
                        <div class="chart-container">
                            <h3>Динамика ВВП</h3>
                            <canvas id="gdpChart" width="300" height="200"></canvas>
                        </div>
                        <div class="chart-container">
                            <h3>Торговый баланс</h3>
                            <canvas id="tradeChart" width="300" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Экран результатов -->
    <div id="resultsScreen" class="screen">
        <div class="container">
            <div class="results-header">
                <div class="results-country-header">
                    <div class="results-country-flag" id="resultsFlagLarge"></div>
                    <h1><i class="fas fa-trophy"></i> Результаты игры</h1>
                </div>
                <div class="selected-country-display">
                    <span>Анализ вашей экономической стратегии за </span>
                    <span id="resultsCountryName"></span>
                </div>
                <div class="version-info">v2.5.0</div>
            </div>

            <div class="results-layout">
                <div class="results-main">
                    <!-- Финальная оценка -->
                    <div class="final-score">
                        <h2>Итоговая оценка</h2>
                        <div id="scoreCard" class="score-card">
                            <div id="scoreValue" class="score-value">0</div>
                            <div id="scoreDescription" class="score-description"></div>
                            <div id="scoreBreakdown" class="score-breakdown"></div>
                        </div>
                    </div>

                    <!-- Анализ доверия -->
                    <div class="trust-analysis">
                        <h2>Дипломатический рейтинг</h2>
                        <div class="trust-card">
                            <div class="trust-score">
                                <i class="fas fa-handshake"></i>
                                <div>
                                    <span class="trust-label">Уровень доверия</span>
                                    <span id="trustValue" class="trust-value">50</span>
                                </div>
                            </div>
                            <p id="trustExplanation" class="trust-explanation"></p>
                        </div>
                    </div>

                    <!-- Лог ходов -->
                    <div class="moves-log">
                        <h2>Лог ходов</h2>
                        <div id="movesLogContent" class="moves-log-content"></div>
                    </div>

                    <!-- Подробный анализ -->
                    <div class="detailed-analysis">
                        <h3><i class="fas fa-microscope"></i> Подробный анализ стратегии</h3>
                        <div id="analysisContent" class="analysis-sections"></div>
                    </div>

                    <!-- Экспорт PDF -->
                    <div class="pdf-export-section">
                        <h2>Экспорт результатов</h2>
                        <div class="pdf-export-form">
                            <div class="form-group">
                                <label for="studentName" class="form-label">ФИО студента</label>
                                <input type="text" id="studentName" class="form-control" placeholder="Введите ваше ФИО">
                            </div>
                            <div class="form-group">
                                <label for="studentGroup" class="form-label">Группа</label>
                                <input type="text" id="studentGroup" class="form-control" placeholder="Введите номер группы">
                            </div>
                            <button class="btn btn--primary btn--full-width" onclick="exportToPDF()">
                                <i class="fas fa-file-pdf"></i>
                                Скачать PDF отчет
                            </button>
                        </div>
                    </div>

                    <!-- Действия -->
                    <div class="results-actions">
                        <button class="btn btn--secondary" onclick="newGame()">
                            <i class="fas fa-refresh"></i>
                            Новая игра
                        </button>
                    </div>
                </div>

                <div class="results-sidebar">
                    <!-- Итоговый график -->
                    <div class="final-chart-panel">
                        <h2>Динамика показателей</h2>
                        <canvas id="finalChart" width="400" height="300"></canvas>
                    </div>

                    <!-- Финальные показатели -->
                    <div class="final-indicators">
                        <h2>Финальные показатели</h2>
                        <div class="indicators-grid">
                            <div class="result-card">
                                <i class="fas fa-chart-line"></i>
                                <h3>ВВП</h3>
                                <div class="result-values">
                                    <span id="finalGdp" class="final-value">100.0</span>
                                    <span id="gdpChange" class="change-value neutral">0.0</span>
                                </div>
                            </div>
                            <div class="result-card">
                                <i class="fas fa-ship"></i>
                                <h3>Экспорт</h3>
                                <div class="result-values">
                                    <span id="finalExp" class="final-value">100.0</span>
                                    <span id="expChange" class="change-value neutral">0.0</span>
                                </div>
                            </div>
                            <div class="result-card">
                                <i class="fas fa-boxes"></i>
                                <h3>Импорт</h3>
                                <div class="result-values">
                                    <span id="finalImp" class="final-value">100.0</span>
                                    <span id="impChange" class="change-value neutral">0.0</span>
                                </div>
                            </div>
                            <div class="result-card">
                                <i class="fas fa-percentage"></i>
                                <h3>Инфляция</h3>
                                <div class="result-values">
                                    <span id="finalCpi" class="final-value">2.0%</span>
                                    <span id="cpiChange" class="change-value neutral">0.0%</span>
                                </div>
                            </div>
                            <div class="result-card">
                                <i class="fas fa-users"></i>
                                <h3>Безработица</h3>
                                <div class="result-values">
                                    <span id="finalUnemployment" class="final-value">5.0%</span>
                                    <span id="unemploymentChange" class="change-value neutral">0.0%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app-enhanced.js"></script>
</body>
</html>