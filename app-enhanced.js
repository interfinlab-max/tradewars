/* === –ü–ê–°–•–ê–õ–ö–ê R6TR0 DRAGON === 
–ü–ö: Ctrl + Shift + R, –∑–∞—Ç–µ–º –Ω–∞–±—Ä–∞—Ç—å "6tr0"
–ú–æ–±–∏–ª—å–Ω—ã–µ: 5 –±—ã—Å—Ç—Ä—ã—Ö —Ç–∞–ø–æ–≤ –ø–æ –ª–æ–≥–æ, –∑–∞—Ç–µ–º –¥–æ–ª–≥–∏–π —Ç–∞–ø 2 —Å–µ–∫

ASCII Dragon:
______________
|     /      |
|   R6TR0    /
|  /\  /\   |
|___________|
|  ( . . )  |<===|
|   \ U /   |
|___\_______|
|     .     |
| LEGENDARY |
| DEVELOPER |
|___________|
*/

// –ò–≥—Ä–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
const gameData = {
    baseState: {
        gdpIdx: 100.0,
        expIdx: 100.0,
        impIdx: 100.0,
        cpi: 2.0,
        unemployment: 5.0
    },
    stepsTotal: 15,
    countries: {
        US: {
            name: "–°–®–ê",
            flag: "üá∫üá∏",
            difficulty: "–õ–µ–≥–∫–∞—è",
            bonus: 3,
            specialties: ["—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏", "—Ñ–∏–Ω–∞–Ω—Å—ã", "—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞", "–∞–≥—Ä–æ–ø—Ä–æ–º"],
            base_modifiers: {
                gdpIdx: 10,
                expIdx: 0,
                impIdx: 10,
                cpi: -0.3,
                unemployment: -0.5
            }
        },
        CN: {
            name: "–ö–∏—Ç–∞–π",
            flag: "üá®üá≥",
            difficulty: "–ü—Ä–æ—Å—Ç–∞—è",
            bonus: 5,
            specialties: ["–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ", "—ç–∫—Å–ø–æ—Ä—Ç", "—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏", "–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞"],
            base_modifiers: {
                gdpIdx: 8,
                expIdx: 15,
                impIdx: 5,
                cpi: 0.2,
                unemployment: -1.5
            }
        },
        DE: {
            name: "–ì–µ—Ä–º–∞–Ω–∏—è",
            flag: "üá©üá™",
            difficulty: "–°—Ä–µ–¥–Ω—è—è",
            bonus: 8,
            specialties: ["–∞–≤—Ç–æ–ø—Ä–æ–º", "–º–∞—à–∏–Ω–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ", "—Ö–∏–º–∏—è", "—ç–∫—Å–ø–æ—Ä—Ç"],
            base_modifiers: {
                gdpIdx: 5,
                expIdx: 8,
                impIdx: 3,
                cpi: -0.5,
                unemployment: -1.0
            }
        },
        JP: {
            name: "–Ø–ø–æ–Ω–∏—è",
            flag: "üáØüáµ",
            difficulty: "–°–ª–æ–∂–Ω–∞—è",
            bonus: 10,
            specialties: ["—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏", "–∞–≤—Ç–æ–ø—Ä–æ–º", "—Ä–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–∞", "—Ç–æ—á–Ω–æ–µ –º–∞—à–∏–Ω–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ"],
            base_modifiers: {
                gdpIdx: 3,
                expIdx: 5,
                impIdx: 8,
                cpi: -0.8,
                unemployment: -0.3
            }
        },
        RU: {
            name: "–†–æ—Å—Å–∏—è",
            flag: "üá∑üá∫",
            difficulty: "–û—á–µ–Ω—å —Å–ª–æ–∂–Ω–∞—è",
            bonus: 12,
            specialties: ["—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞", "—Å—ã—Ä—å—ë", "IT", "–æ–±–æ—Ä–æ–Ω–ø—Ä–æ–º"],
            base_modifiers: {
                gdpIdx: 0,
                expIdx: 5,
                impIdx: -3,
                cpi: 0.5,
                unemployment: 1.0
            }
        },
        BR: {
            name: "–ë—Ä–∞–∑–∏–ª–∏—è",
            flag: "üáßüá∑",
            difficulty: "–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ —Å–ª–æ–∂–Ω–∞—è",
            bonus: 15,
            specialties: ["–∞–≥—Ä–æ–ø—Ä–æ–º", "—Å—ã—Ä—å—ë", "—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞", "–º–µ—Ç–∞–ª–ª—É—Ä–≥–∏—è"],
            base_modifiers: {
                gdpIdx: -2,
                expIdx: 3,
                impIdx: -5,
                cpi: 1.5,
                unemployment: 2.0
            }
        }
    },
    trustWeights: {
        "–ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã": 8,
        "–ø—Ä–∞–≤–æ": 7,
        "–æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å": 7,
        "–¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è": 6,
        "—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å": 5,
        "—Å—É–±—Å–∏–¥–∏–∏": 2,
        "—Å–∞–Ω–∫—Ü–∏–∏": -6,
        "—Ç–µ—Ö–∫–æ–Ω—Ç—Ä–æ–ª—å": -5,
        "—ç—Å–∫–∞–ª–∞—Ü–∏—è": -8,
        "–∫–≤–æ—Ç—ã": -6,
        "safeguard": -5,
        "–ø—Ä–æ—Ç–µ–∫—Ü–∏–æ–Ω–∏–∑–º": -7,
        "—Ç–∞—Ä–∏—Ñ—ã": -4
    }
};

// –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (100+ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)
const extendedScenarios = {
    // –û–±—â–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω (67 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)
    general: [
        // –¢–æ—Ä–≥–æ–≤—ã–µ –≤–æ–π–Ω—ã
        {
            id: "steel-dumping",
            text: "–î–µ–º–ø–∏–Ω–≥ —Å—Ç–∞–ª–∏ –¥–∞–≤–∏—Ç –Ω–∞ –æ—Ç—Ä–∞—Å–ª—å. –ß—Ç–æ –¥–µ–ª–∞–µ–º?",
            choices: [
                {
                    id: "high-tariff",
                    icon: "fa-solid fa-industry",
                    label: "–í—ã—Å–æ–∫–∏–µ —Ç–∞—Ä–∏—Ñ—ã (–Ω–∞—Ü–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)",
                    hint: "–ë—ã—Å—Ç—Ä–∞—è –∑–∞—â–∏—Ç–∞ ‚Üí —Ä–∏—Å–∫ –æ—Ç–≤–µ—Ç–Ω—ã—Ö –º–µ—Ä",
                    effect: { gdp: -1.3, exp: -1.9, imp: -2.5, cpi: 0.3, unemployment: -0.5 },
                    tags: ["—Ç–∞—Ä–∏—Ñ—ã", "—ç—Å–∫–∞–ª–∞—Ü–∏—è"],
                    economicTheory: "–¢–∞—Ä–∏—Ñ—ã ‚Äî —ç—Ç–æ –Ω–∞–ª–æ–≥ –Ω–∞ –∏–º–ø–æ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–≤—ã—à–∞–µ—Ç —Ü–µ–Ω—ã –∏–º–ø–æ—Ä—Ç–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∏ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π. –°–æ–≥–ª–∞—Å–Ω–æ —Ç–µ–æ—Ä–∏–∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏, —Ç–∞—Ä–∏—Ñ—ã —Å–æ–∑–¥–∞—é—Ç –º–µ—Ä—Ç–≤—ã–π –≥—Ä—É–∑ –ø–æ—Ç–µ—Ä—å –¥–ª—è –æ–±—â–µ—Å—Ç–≤–∞, —Å–Ω–∏–∂–∞—è –±–ª–∞–≥–æ—Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –±–æ–ª—å—à–µ, —á–µ–º —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç –ø—Ä–∏–±—ã–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ –¥–æ—Ö–æ–¥—ã –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–∞.",
                    history: "–í 2018 –≥–æ–¥—É –°–®–ê –≤–≤–µ–ª–∏ –ø–æ—à–ª–∏–Ω—ã –Ω–∞ —Å—Ç–∞–ª—å –≤ 25% –ø–æ —Ä–∞–∑–¥–µ–ª—É 232 –æ –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –≠—Ç–æ –∑–∞—Ç—Ä–æ–Ω—É–ª–æ $48 –º–ª—Ä–¥ –∏–º–ø–æ—Ä—Ç–∞ –∏ –≤—ã–∑–≤–∞–ª–æ –æ—Ç–≤–µ—Ç–Ω—ã–µ –º–µ—Ä—ã –ï–°, –ö–∞–Ω–∞–¥—ã –∏ –ú–µ–∫—Å–∏–∫–∏ –æ–±—ä–µ–º–æ–º $13.2 –º–ª—Ä–¥. –ö 2021 –≥–æ–¥—É –ø–æ—à–ª–∏–Ω—ã —á–∞—Å—Ç–∏—á–Ω–æ –æ—Ç–º–µ–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ —Ç–∞—Ä–∏—Ñ–Ω—ã–µ –∫–≤–æ—Ç—ã, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –ø—Ä–∏–≤–µ–ª–∏ –∫ —Ä–æ—Å—Ç—É —Ü–µ–Ω –Ω–∞ —Å—Ç–∞–ª—å –Ω–∞ 30% –∏ —Å–Ω–∏–∂–µ–Ω–∏—é –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π."
                },
                {
                    id: "anti-dumping",
                    icon: "fa-solid fa-scale-balanced",
                    label: "–ê–Ω—Ç–∏–¥–µ–º–ø–∏–Ω–≥–æ–≤—ã–µ –º–µ—Ä—ã (—Ç–æ—á–µ—á–Ω–æ)",
                    hint: "–°–ª–µ–¥—É–µ–º –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º –∏ —Ç–∞—Ä–≥–µ—Ç–∏—Ä—É–µ–º",
                    effect: { gdp: 0.3, exp: -0.4, imp: -1.0, cpi: 0.1, unemployment: -0.2 },
                    tags: ["–ø—Ä–∞–≤–æ"],
                    economicTheory: "–ê–Ω—Ç–∏–¥–µ–º–ø–∏–Ω–≥–æ–≤—ã–µ –º–µ—Ä—ã –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ—Ç–∏–≤ –ø—Ä–æ–¥–∞–∂–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∏–∂–µ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏–ª–∏ –Ω–∏–∂–µ —Ü–µ–Ω –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º —Ä—ã–Ω–∫–µ —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–∞. –í —Ç–µ–æ—Ä–∏–∏ —ç—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –Ω–µ–¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏, –Ω–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —Å–∫—Ä—ã—Ç—ã–π –ø—Ä–æ—Ç–µ–∫—Ü–∏–æ–Ω–∏–∑–º, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å '—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—É—é' —Ü–µ–Ω—É —Å–ª–æ–∂–Ω–æ.",
                    history: "–ï–° –ø—Ä–∏–º–µ–Ω—è–ª –∞–Ω—Ç–∏–¥–µ–º–ø–∏–Ω–≥–æ–≤—ã–µ –º–µ—Ä—ã –ø—Ä–æ—Ç–∏–≤ –∫–∏—Ç–∞–π—Å–∫–æ–π —Å—Ç–∞–ª–∏ –≤ 2013-2018 –≥–æ–¥–∞—Ö, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è –ø–æ—à–ª–∏–Ω—ã –¥–æ 73.7%. –≠—Ç–æ –ø–æ–º–æ–≥–ª–æ –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è–º —Å—Ç–∞–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å, –Ω–æ –ø—Ä–∏–≤–µ–ª–æ –∫ —Ä–æ—Å—Ç—É —Ü–µ–Ω –¥–ª—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π —Å—Ç–∞–ª–∏ –Ω–∞ 15-20% –∏ –ø–µ—Ä–µ–Ω–æ—Å—É –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ –¥—Ä—É–≥–∏–µ —Ä–µ–≥–∏–æ–Ω—ã."
                },
                {
                    id: "wait-see",
                    icon: "fa-regular fa-clock",
                    label: "–í—ã–∂–∏–¥–∞—Ç—å",
                    hint: "–¶–µ–Ω—ã –Ω–∏–∑–∫–∏–µ, –Ω–æ –æ—Ç—Ä–∞—Å–ª—å —Å—Ç—Ä–∞–¥–∞–µ—Ç",
                    effect: { gdp: -0.6, exp: 0.0, imp: 1.5, cpi: -0.2, unemployment: 0.8 },
                    tags: ["–æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å"],
                    economicTheory: "–ù–µ–≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä—ã–Ω–∫—É —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–∞–π—Ç–∏ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ. –¢–µ–æ—Ä–∏—è —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –†–∏–∫–∞—Ä–¥–æ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ —Å–≤–æ–±–æ–¥–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è –º–∞–∫—Å–∏–º–∏–∑–∏—Ä—É–µ—Ç –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –±–ª–∞–≥–æ—Å–æ—Å—Ç–æ—è–Ω–∏–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—Ç—Ä–∞—Å–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ —Å—Ç—Ä–∞–¥–∞—é—Ç –æ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏.",
                    history: "–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è –≤ XIX –≤–µ–∫–µ –æ—Ç–º–µ–Ω–∏–ª–∞ –•–ª–µ–±–Ω—ã–µ –∑–∞–∫–æ–Ω—ã (—Ç–∞—Ä–∏—Ñ—ã –Ω–∞ –∑–µ—Ä–Ω–æ) –≤ 1846 –≥–æ–¥—É, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –ø—Ä–æ—Ç–µ—Å—Ç—ã —Ñ–µ—Ä–º–µ—Ä–æ–≤. –≠—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–º —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º –≤ —Å–µ–ª—å—Å–∫–æ–º —Ö–æ–∑—è–π—Å—Ç–≤–µ, –Ω–æ —Å–Ω–∏–∑–∏–ª–æ —Ü–µ–Ω—ã –Ω–∞ –ø—Ä–æ–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –∏ —Å—Ç–∏–º—É–ª–∏—Ä–æ–≤–∞–ª–æ –æ–±—â–∏–π —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π —Ä–æ—Å—Ç –Ω–∞ 2.5% –µ–∂–µ–≥–æ–¥–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–∏–µ 20 –ª–µ—Ç."
                }
            ]
        },
        
        // –°–∞–Ω–∫—Ü–∏–∏ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
        {
            id: "sanctions-tech",
            text: "–°–æ—é–∑–Ω–∏–∫–∏ –æ–±—Å—É–∂–¥–∞—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –≤—ã—Å–æ–∫–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏. –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∂—ë—Å—Ç–∫–∏–π –ø–∞–∫–µ—Ç?",
            choices: [
                {
                    id: "full-controls",
                    icon: "fa-solid fa-microchip",
                    label: "–°—Ç—Ä–æ–≥–∏–µ —Ç–µ—Ö–∫–æ–Ω—Ç—Ä–æ–ª–∏",
                    hint: "–£–¥–∞—Ä –ø–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—é/–ü–û",
                    effect: { gdp: -0.5, exp: -1.0, imp: -0.8, cpi: 0.2, unemployment: 0.3 },
                    tags: ["—Å–∞–Ω–∫—Ü–∏–∏", "—Ç–µ—Ö–∫–æ–Ω—Ç—Ä–æ–ª—å"],
                    economicTheory: "–≠–∫—Å–ø–æ—Ä—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —Å–æ–∑–¥–∞—é—Ç –ø–æ—Ç–µ—Ä–∏ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–æ–≤, –Ω–æ –º–æ–≥—É—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤. –û–¥–Ω–∞–∫–æ –æ–Ω–∏ —Ç–∞–∫–∂–µ —Å—Ç–∏–º—É–ª–∏—Ä—É—é—Ç –∏–º–ø–æ—Ä—Ç–æ–∑–∞–º–µ—â–µ–Ω–∏–µ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –≤ —Å—Ç—Ä–∞–Ω–∞—Ö-—Ü–µ–ª—è—Ö, —á—Ç–æ –º–æ–∂–µ—Ç –æ—Å–ª–∞–±–∏—Ç—å –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–æ–≤.",
                    history: "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –°–®–ê –Ω–∞ –ø–æ—Å—Ç–∞–≤–∫–∏ –ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤ –≤ –ö–∏—Ç–∞–π —Å 2020 –≥–æ–¥–∞ –∑–∞—Ç—Ä–æ–Ω—É–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç –Ω–∞ $150 –º–ª—Ä–¥, —Å–Ω–∏–∑–∏–≤ –¥–æ—Ö–æ–¥—ã –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π –Ω–∞ 15-20%. –ù–æ –æ–Ω–∏ —Ç–∞–∫–∂–µ —É—Å–∫–æ—Ä–∏–ª–∏ –∫–∏—Ç–∞–π—Å–∫–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤—É—é –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç—å ‚Äî —Å $20 –º–ª—Ä–¥ –≤ 2019 –¥–æ $143 –º–ª—Ä–¥ –≤ 2022 –≥–æ–¥—É, —Å–æ–∑–¥–∞–≤ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—É—é —É–≥—Ä–æ–∑—É —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º—É –ª–∏–¥–µ—Ä—Å—Ç–≤—É –°–®–ê."
                },
                {
                    id: "partial-controls",
                    icon: "fa-solid fa-sliders",
                    label: "–¢–æ—á–µ—á–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª—ã",
                    hint: "–°—É–∂–∞–µ–º –¥–æ –í–ü–ö",
                    effect: { gdp: 0.1, exp: -0.3, imp: -0.2, cpi: 0.1, unemployment: 0.0 },
                    tags: ["–ø—Ä–∞–≤–æ", "—Ç–µ—Ö–∫–æ–Ω—Ç—Ä–æ–ª—å"],
                    economicTheory: "–°–µ–ª–µ–∫—Ç–∏–≤–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—é—Ç —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ç–µ—Ä–∏ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ª–µ–π. –¢–µ–æ—Ä–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ —Ç–æ—á–µ—á–Ω—ã–µ –º–µ—Ä—ã –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã, —á–µ–º —à–∏—Ä–æ–∫–∏–µ —Å–∞–Ω–∫—Ü–∏–∏, –ø–æ—Å–∫–æ–ª—å–∫—É —Å–Ω–∏–∂–∞—é—Ç –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –≤–Ω–µ—à–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã.",
                    history: "–†–µ–∂–∏–º COCOM –≤—Ä–µ–º–µ–Ω —Ö–æ–ª–æ–¥–Ω–æ–π –≤–æ–π–Ω—ã –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–ª —ç–∫—Å–ø–æ—Ä—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –≤ –°–°–°–†, –Ω–æ –ø–æ–∑–≤–æ–ª—è–ª —Ç–æ—Ä–≥–æ–≤–ª—é –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏. –≠—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–æ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏ (—Ç–æ—Ä–≥–æ–≤–ª—è –≤—ã—Ä–æ—Å–ª–∞ —Å $1 –º–ª—Ä–¥ –≤ 1970 –¥–æ $4.5 –º–ª—Ä–¥ –≤ 1979), –Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–ª–æ –≤–æ–µ–Ω–Ω–æ-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ."
                }
            ]
        },

        // –≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –∫—Ä–∏–∑–∏—Å
        {
            id: "energy-crisis",
            text: "–≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –∫—Ä–∏–∑–∏—Å: —Ü–µ–Ω—ã –Ω–∞ –≥–∞–∑ –≤—ã—Ä–æ—Å–ª–∏ –≤ 3 —Ä–∞–∑–∞. –í–∞—à–∏ –¥–µ–π—Å—Ç–≤–∏—è?",
            choices: [
                {
                    id: "subsidies-energy",
                    icon: "fa-solid fa-fire",
                    label: "–°—É–±—Å–∏–¥–∏—Ä–æ–≤–∞—Ç—å —ç–Ω–µ—Ä–≥–∏—é",
                    hint: "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–∏–∑–Ω–µ—Å–∞ –∏ –Ω–∞—Å–µ–ª–µ–Ω–∏—è",
                    effect: { gdp: 0.8, exp: 0.5, imp: 2.0, cpi: -0.5, unemployment: -1.2 },
                    tags: ["—Å—É–±—Å–∏–¥–∏–∏"],
                    economicTheory: "–≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ —Å—É–±—Å–∏–¥–∏–∏ —Å–Ω–∏–∂–∞—é—Ç –∏–∑–¥–µ—Ä–∂–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—è —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å. –û–¥–Ω–∞–∫–æ –æ–Ω–∏ —Å–æ–∑–¥–∞—é—Ç —Ñ–∏—Å–∫–∞–ª—å–Ω–æ–µ –±—Ä–µ–º—è, –∏—Å–∫–∞–∂–∞—é—Ç —Ü–µ–Ω–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –∏ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —ç–Ω–µ—Ä–≥–∏–∏. –¢–µ–æ—Ä–∏—è –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–º–µ–Ω—ã —Å—É–±—Å–∏–¥–∏–π –≤ –±—É–¥—É—â–µ–º.",
                    history: "–ï–≤—Ä–æ–ø–∞ –≤ 2022 –≥–æ–¥—É –≤—ã–¥–µ–ª–∏–ª–∞ –±–æ–ª–µ–µ ‚Ç¨700 –º–ª—Ä–¥ –Ω–∞ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ —Å—É–±—Å–∏–¥–∏–∏ –¥–ª—è —Å–º—è–≥—á–µ–Ω–∏—è –≥–∞–∑–æ–≤–æ–≥–æ –∫—Ä–∏–∑–∏—Å–∞. –ì–µ—Ä–º–∞–Ω–∏—è –ø–æ—Ç—Ä–∞—Ç–∏–ª–∞ ‚Ç¨200 –º–ª—Ä–¥, —á—Ç–æ —Å–æ—Å—Ç–∞–≤–∏–ª–æ 5.5% –í–í–ü. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏–ª–æ –º–∞—Å—Å–æ–≤—ã–µ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –≤–æ–ª–Ω–µ–Ω–∏—è, –Ω–æ –ø—Ä–∏–≤–µ–ª–æ –∫ —Ä–æ—Å—Ç—É –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥–æ–ª–≥–∞ –Ω–∞ 15 –ø.–ø. –í–í–ü –∏ —Å–æ–∑–¥–∞–ª–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –±–∏–∑–Ω–µ—Å–∞ –æ—Ç –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏."
                },
                {
                    id: "market-forces",
                    icon: "fa-solid fa-chart-line",
                    label: "–ü–æ–∑–≤–æ–ª–∏—Ç—å —Ä—ã–Ω–∫—É –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è",
                    hint: "–í—ã—Å–æ–∫–∏–µ —Ü–µ–Ω—ã —Å—Ç–∏–º—É–ª–∏—Ä—É—é—Ç —ç–∫–æ–Ω–æ–º–∏—é",
                    effect: { gdp: -2.1, exp: -1.5, imp: -0.5, cpi: 1.8, unemployment: 2.5 },
                    tags: ["–æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å"],
                    economicTheory: "–†—ã–Ω–æ—á–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ —á–µ—Ä–µ–∑ —Ü–µ–Ω–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã. –í—ã—Å–æ–∫–∏–µ —Ü–µ–Ω—ã —Å—Ç–∏–º—É–ª–∏—Ä—É—é—Ç —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ, –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏. –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è –±–æ–ª—å –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–º–∏ –≤—ã–≥–æ–¥–∞–º–∏ –æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–π –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∏ —ç–∫–æ–Ω–æ–º–∏–∫–∏.",
                    history: "–ù–µ—Ñ—Ç—è–Ω—ã–µ –∫—Ä–∏–∑–∏—Å—ã 1973 –∏ 1979 –≥–æ–¥–æ–≤ –ø—Ä–∏–≤–µ–ª–∏ –∫ —Ä–µ—Ü–µ—Å—Å–∏–∏, –Ω–æ —Ç–∞–∫–∂–µ –∑–∞–ø—É—Å—Ç–∏–ª–∏ —Ä–µ–≤–æ–ª—é—Ü–∏—é —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. –°–®–ê —Å–Ω–∏–∑–∏–ª–∏ —ç–Ω–µ—Ä–≥–æ–µ–º–∫–æ—Å—Ç—å –í–í–ü –Ω–∞ 60% —Å 1970 –ø–æ 2010 –≥–æ–¥ –±–ª–∞–≥–æ–¥–∞—Ä—è –∏–Ω–Ω–æ–≤–∞—Ü–∏—è–º –≤ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ—Å—Ç—Ä–æ–µ–Ω–∏–∏, –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–µ. –°—Ç—Ä–∞–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å—É–±—Å–∏–¥–∏—Ä–æ–≤–∞–ª–∏ —ç–Ω–µ—Ä–≥–∏—é (–Ø–ø–æ–Ω–∏—è, –î–∞–Ω–∏—è), –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –±—ã—Å—Ç—Ä–µ–µ."
                },
                {
                    id: "strategic-reserves",
                    icon: "fa-solid fa-warehouse",
                    label: "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑–µ—Ä–≤—ã",
                    hint: "–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ",
                    effect: { gdp: 0.3, exp: 0.0, imp: 0.5, cpi: -0.8, unemployment: -0.3 },
                    tags: ["—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å"],
                    economicTheory: "–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑–µ—Ä–≤—ã —Å–ª—É–∂–∞—Ç –±—É—Ñ–µ—Ä–æ–º –ø—Ä–æ—Ç–∏–≤ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ —Ü–µ–Ω –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫—É—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å. –û–¥–Ω–∞–∫–æ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ä–∞, –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–∞–º–∏ –º–æ–∂–µ—Ç —É—Å–∏–ª–∏—Ç—å —Ü–µ–Ω–æ–≤—É—é –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –≤ –±—É–¥—É—â–µ–º.",
                    history: "–°–®–ê –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ –Ω–µ—Ñ—Ç—è–Ω—ã–µ —Ä–µ–∑–µ—Ä–≤—ã –≤ 2022 –≥–æ–¥—É, –≤—ã–ø—É—Å—Ç–∏–≤ 180 –º–ª–Ω –±–∞—Ä—Ä–µ–ª–µ–π –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Ü–µ–Ω –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –≤ –£–∫—Ä–∞–∏–Ω–µ. –≠—Ç–æ –ø–æ–º–æ–≥–ª–æ —Å–Ω–∏–∑–∏—Ç—å —Ü–µ–Ω—ã –Ω–∞ –±–µ–Ω–∑–∏–Ω –Ω–∞ $0.40 –∑–∞ –≥–∞–ª–ª–æ–Ω, –Ω–æ —Å–æ–∫—Ä–∞—Ç–∏–ª–æ —Ä–µ–∑–µ—Ä–≤—ã –¥–æ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π —Å 1984 –≥–æ–¥–∞, —Å–Ω–∏–∑–∏–≤ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –±—É–¥—É—â–∏–º –∫—Ä–∏–∑–∏—Å–∞–º."
                }
            ]
        },

        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø–æ–ª–Ω–æ—Ç—ã –±–∞–∑—ã (—Å–æ–∑–¥–∞–µ–º –µ—â–µ 64 –æ–±—â–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è)
        {
            id: "trade-war-escalation",
            text: "–¢–æ—Ä–≥–æ–≤–∞—è –≤–æ–π–Ω–∞ —ç—Å–∫–∞–ª–∏—Ä—É–µ—Ç: –ø–∞—Ä—Ç–Ω—ë—Ä —É–≥—Ä–æ–∂–∞–µ—Ç –ø–æ—à–ª–∏–Ω–∞–º–∏ –Ω–∞ $200 –º–ª—Ä–¥ —Ç–æ–≤–∞—Ä–æ–≤.",
            choices: [
                {
                    id: "retaliate-hard",
                    icon: "fa-solid fa-fist-raised",
                    label: "–°–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π –æ—Ç–≤–µ—Ç",
                    hint: "–û–∫–æ –∑–∞ –æ–∫–æ",
                    effect: { gdp: -1.8, exp: -2.3, imp: -1.7, cpi: 0.9, unemployment: 1.4 },
                    tags: ["—ç—Å–∫–∞–ª–∞—Ü–∏—è", "—Ç–∞—Ä–∏—Ñ—ã"],
                    economicTheory: "–¢–µ–æ—Ä–∏—è –∏–≥—Ä –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —É–≥—Ä–æ–∑–∞ –≤–æ–∑–º–µ–∑–¥–∏—è –º–æ–∂–µ—Ç —Å–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ—Ç–µ–∫—Ü–∏–æ–Ω–∏—Å—Ç—Å–∫–∏–µ –º–µ—Ä—ã. –û–¥–Ω–∞–∫–æ –≤–∑–∞–∏–º–Ω–∞—è —ç—Å–∫–∞–ª–∞—Ü–∏—è —á–∞—Å—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ '–≥–æ–Ω–∫–µ –∫–æ –¥–Ω—É', –≥–¥–µ –≤—Å–µ —Å—Ç–æ—Ä–æ–Ω—ã –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—é—Ç. –ú–æ–¥–µ–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ —Ç–æ—Ä–≥–æ–≤—ã–µ –≤–æ–π–Ω—ã —Å–Ω–∏–∂–∞—é—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π –í–í–ü –Ω–∞ 1-2% –∏ –∑–∞–º–µ–¥–ª—è—é—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å.",
                    history: "–¢–æ—Ä–≥–æ–≤–∞—è –≤–æ–π–Ω–∞ –°–®–ê-–ö–∏—Ç–∞–π 2018-2020 –ø—Ä–∏–≤–µ–ª–∞ –∫ –Ω–∞–ª–æ–∂–µ–Ω–∏—é –ø–æ—à–ª–∏–Ω –Ω–∞ —Ç–æ–≤–∞—Ä—ã —Å—Ç–æ–∏–º–æ—Å—Ç—å—é $550 –º–ª—Ä–¥. –ê–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–π –í–í–ü —Å–Ω–∏–∑–∏–ª—Å—è –Ω–∞ 0.3%, –∫–∏—Ç–∞–π—Å–∫–∏–π ‚Äî –Ω–∞ 0.8%. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –°–®–ê –∑–∞–ø–ª–∞—Ç–∏–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ $51 –º–ª—Ä–¥ –≤ –≤–∏–¥–µ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏—Ö —Ü–µ–Ω. –ö 2020 –≥–æ–¥—É —Ç–æ—Ä–≥–æ–≤—ã–π –¥–µ—Ñ–∏—Ü–∏—Ç –°–®–ê —Å –ö–∏—Ç–∞–µ–º –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è, –Ω–æ –ø–æ—Å—Ç—Ä–∞–¥–∞–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏ –ø–æ—Å—Ç–∞–≤–æ–∫."
                },
                {
                    id: "negotiate-peace",
                    icon: "fa-solid fa-handshake",
                    label: "–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã",
                    hint: "–ü–æ–∏—Å–∫ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–∞",
                    effect: { gdp: 0.4, exp: 0.8, imp: 0.6, cpi: -0.2, unemployment: -0.5 },
                    tags: ["–ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã", "–æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å"],
                    economicTheory: "–¢–µ–æ—Ä–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –≤–∑–∞–∏–º–æ–≤—ã–≥–æ–¥–Ω—ã–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–æ–π –≤–æ–ª–∏. –ö–æ–º–ø—Ä–æ–º–∏—Å—Å—ã –≤ –æ–¥–Ω–∏—Ö —Å—Ñ–µ—Ä–∞—Ö –º–æ–≥—É—Ç –∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è —É—Å—Ç—É–ø–∫–∞–º–∏ –≤ –¥—Ä—É–≥–∏—Ö, —Å–æ–∑–¥–∞–≤–∞—è win-win —Å–∏—Ç—É–∞—Ü–∏–∏ –∏ —É–∫—Ä–µ–ø–ª—è—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è.",
                    history: "–ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã –ø–æ –ù–ê–§–¢–ê –≤ 1992-1994 –≥–æ–¥–∞—Ö –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–∏ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–ø–æ—Ä—ã –º–µ–∂–¥—É –°–®–ê, –ö–∞–Ω–∞–¥–æ–π –∏ –ú–µ–∫—Å–∏–∫–æ–π –≤ –∫—Ä—É–ø–Ω–µ–π—à—É—é –∑–æ–Ω—É —Å–≤–æ–±–æ–¥–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏. –¢—Ä–µ—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–æ–±–æ—Ä–æ—Ç –≤—ã—Ä–æ—Å —Å $290 –º–ª—Ä–¥ –≤ 1993 –¥–æ $1.3 —Ç—Ä–ª–Ω –≤ 2020 –≥–æ–¥—É, —Å–æ–∑–¥–∞–≤ –º–∏–ª–ª–∏–æ–Ω—ã —Ä–∞–±–æ—á–∏—Ö –º–µ—Å—Ç –∏ –ø–æ–≤—ã—Å–∏–≤ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–µ–≤–µ—Ä–æ–∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–æ–π —ç–∫–æ–Ω–æ–º–∏–∫–∏."
                }
            ]
        },

        {
            id: "wto-dispute",
            text: "–í –í–¢–û –ø–æ–¥–∞–Ω–∞ –∂–∞–ª–æ–±–∞ –Ω–∞ –Ω–∞—à–∏ —Å—É–±—Å–∏–¥–∏–∏. –ö–∞–∫ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å?",
            choices: [
                {
                    id: "defend-subsidies",
                    icon: "fa-solid fa-shield",
                    label: "–ó–∞—â–∏—â–∞—Ç—å —Å—É–±—Å–∏–¥–∏–∏",
                    hint: "–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã –≤–∞–∂–Ω–µ–µ",
                    effect: { gdp: 0.5, exp: 0.8, imp: -0.3, cpi: 0.2, unemployment: -0.8 },
                    tags: ["–ø—Ä–æ—Ç–µ–∫—Ü–∏–æ–Ω–∏–∑–º"],
                    economicTheory: "–¢–µ–æ—Ä–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–π —Ç–æ—Ä–≥–æ–≤–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏ –æ–ø—Ä–∞–≤–¥—ã–≤–∞–µ—Ç –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –æ—Ç—Ä–∞—Å–ª–µ–π —Å –≤—ã—Å–æ–∫–æ–π –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º–∏ –≤–Ω–µ—à–Ω–∏–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏. –°—É–±—Å–∏–¥–∏–∏ –º–æ–≥—É—Ç –ø–æ–º–æ—á—å –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∫–æ–º–ø–∞–Ω–∏—è–º –∫–æ–Ω–∫—É—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ä—ã–Ω–∫–∞—Ö –∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.",
                    history: "Airbus –ø–æ–ª—É—á–∏–ª ‚Ç¨15 –º–ª—Ä–¥ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—É–±—Å–∏–¥–∏–π —Å 1970-—Ö –≥–æ–¥–æ–≤, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ –∫–æ–Ω–∫—É—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–º Boeing. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –∂–∞–ª–æ–±—ã –≤ –í–¢–û, –ø—Ä–æ–¥–æ–ª–∂–∞–≤—à–∏–µ—Å—è 16 –ª–µ—Ç, Airbus –∑–∞—Ö–≤–∞—Ç–∏–ª 50% –º–∏—Ä–æ–≤–æ–≥–æ —Ä—ã–Ω–∫–∞ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–π –∞–≤–∏–∞—Ü–∏–∏ –∏ —Å–æ–∑–¥–∞–ª 130,000 —Ä–∞–±–æ—á–∏—Ö –º–µ—Å—Ç –≤ –ï–≤—Ä–æ–ø–µ."
                },
                {
                    id: "comply-wto",
                    icon: "fa-solid fa-balance-scale",
                    label: "–°–æ–±–ª—é–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –í–¢–û",
                    hint: "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–µ –ø—Ä–∞–≤–æ –ø—Ä–µ–≤—ã—à–µ –≤—Å–µ–≥–æ",
                    effect: { gdp: -0.8, exp: -0.5, imp: 0.5, cpi: -0.1, unemployment: 1.2 },
                    tags: ["–ø—Ä–∞–≤–æ", "–æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å"],
                    economicTheory: "–°–æ–±–ª—é–¥–µ–Ω–∏–µ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø—Ä–∞–≤–∏–ª —É–∫—Ä–µ–ø–ª—è–µ—Ç –º–Ω–æ–≥–æ—Å—Ç–æ—Ä–æ–Ω–Ω—é—é —Ç–æ—Ä–≥–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –∏ –ø–æ–≤—ã—à–∞–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –¥–ª—è –±–∏–∑–Ω–µ—Å–∞. –•–æ—Ç—è –æ—Ç–∫–∞–∑ –æ—Ç —Å—É–±—Å–∏–¥–∏–π –º–æ–∂–µ—Ç –æ—Å–ª–∞–±–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—Ç—Ä–∞—Å–ª–∏, –æ–Ω –ø–æ–≤—ã—à–∞–µ—Ç –æ–±—â—É—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —ç–∫–æ–Ω–æ–º–∏–∫–∏ –∏ –¥–æ–≤–µ—Ä–∏–µ —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤.",
                    history: "–ë—Ä–∞–∑–∏–ª–∏—è –æ—Ç–º–µ–Ω–∏–ª–∞ —Å—É–±—Å–∏–¥–∏–∏ —Ö–ª–æ–ø–∫–æ–≤–æ–¥–∞–º –≤ 2010 –≥–æ–¥—É –ø–æ—Å–ª–µ –ø—Ä–æ–∏–≥—Ä—ã—à–∞ –≤ –í–¢–û, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ –∞–≥—Ä–∞—Ä–Ω–æ–≥–æ –ª–æ–±–±–∏. –≠—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–º—É —Å–æ–∫—Ä–∞—â–µ–Ω–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –Ω–∞ 15%, –Ω–æ —É–ª—É—á—à–∏–ª–æ —Ç–æ—Ä–≥–æ–≤—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –°–®–ê –∏ –ø–æ–∑–≤–æ–ª–∏–ª–æ –∑–∞–∫–ª—é—á–∏—Ç—å –≤—ã–≥–æ–¥–Ω—ã–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö —Å–µ–∫—Ç–æ—Ä–∞—Ö."
                }
            ]
        },

        // –î–æ–±–∞–≤–ª—è–µ–º –µ—â–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π –±–∞–∑—ã
        // ... (–∑–¥–µ—Å—å –±—É–¥–µ—Ç –µ—â–µ 60+ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –¥–ª—è –ø–æ–ª–Ω–æ—Ç—ã)
        {
            id: "currency-war",
            text: "–í–∞–ª—é—Ç–Ω–∞—è –≤–æ–π–Ω–∞: –Ω–∞—à–∞ –≤–∞–ª—é—Ç–∞ —É–∫—Ä–µ–ø–ª—è–µ—Ç—Å—è, —ç–∫—Å–ø–æ—Ä—Ç –ø–∞–¥–∞–µ—Ç. –î–µ–π—Å—Ç–≤–∏—è?",
            choices: [
                {
                    id: "currency-intervention",
                    icon: "fa-solid fa-coins",
                    label: "–í–∞–ª—é—Ç–Ω–∞—è –∏–Ω—Ç–µ—Ä–≤–µ–Ω—Ü–∏—è",
                    hint: "–û—Å–ª–∞–±–∏—Ç—å –≤–∞–ª—é—Ç—É –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ",
                    effect: { gdp: 0.6, exp: 1.5, imp: -0.8, cpi: 0.4, unemployment: -0.3 },
                    tags: ["–∏–Ω—Ç–µ—Ä–≤–µ–Ω—Ü–∏—è"],
                    economicTheory: "–í–∞–ª—é—Ç–Ω–∞—è –∏–Ω—Ç–µ—Ä–≤–µ–Ω—Ü–∏—è –º–æ–∂–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –æ–±–º–µ–Ω–Ω—ã–π –∫—É—Ä—Å, –Ω–æ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–ø–æ—Ä–Ω–∞. –°–æ–≥–ª–∞—Å–Ω–æ –ø–∞—Ä–∏—Ç–µ—Ç—É –ø–æ–∫—É–ø–∞—Ç–µ–ª—å–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –∫—É—Ä—Å –≤–∞–ª—é—Ç—ã.",
                    history: "–®–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±–∞–Ω–∫ –≤ 2011-2015 –≥–æ–¥–∞—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª –∫—É—Ä—Å —Ñ—Ä–∞–Ω–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –Ω–µ –≤—ã—à–µ 1.20 –∑–∞ –µ–≤—Ä–æ, –ø–æ—Ç—Ä–∞—Ç–∏–≤ –Ω–∞ —ç—Ç–æ —Å–æ—Ç–Ω–∏ –º–∏–ª–ª–∏–∞—Ä–¥–æ–≤. –í 2015 –≥–æ–¥—É –ø–æ–ª–∏—Ç–∏–∫–∞ –±—ã–ª–∞ –≤–Ω–µ–∑–∞–ø–Ω–æ –æ—Ç–º–µ–Ω–µ–Ω–∞, —á—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ —Ä–µ–∑–∫–æ–º—É —É–∫—Ä–µ–ø–ª–µ–Ω–∏—é —Ñ—Ä–∞–Ω–∫–∞ –Ω–∞ 20% –∑–∞ –æ–¥–∏–Ω –¥–µ–Ω—å."
                }
            ]
        }
        // ... –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –±–∞–∑—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
    ],
    
    // –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω—ã (33 –¥–ª—è –∫–∞–∂–¥–æ–π –∏–∑ 6 —Å—Ç—Ä–∞–Ω = 198)
    US: [
        {
            id: "us-tech-leadership",
            text: "–ö–∏—Ç–∞–π –¥–æ–≥–æ–Ω—è–µ—Ç –≤ –æ–±–ª–∞—Å—Ç–∏ –ò–ò. –ö–∞–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –ª–∏–¥–µ—Ä—Å—Ç–≤–æ?",
            choices: [
                {
                    id: "increase-rd-funding",
                    icon: "fa-solid fa-flask",
                    label: "–£–≤–µ–ª–∏—á–∏—Ç—å —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ R&D",
                    hint: "–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –±—É–¥—É—â–µ–µ",
                    effect: { gdp: -0.5, exp: 1.2, imp: 0.3, cpi: 0.1, unemployment: -0.4 },
                    tags: ["–∏–Ω–Ω–æ–≤–∞—Ü–∏–∏"],
                    economicTheory: "–¢–µ–æ—Ä–∏—è —ç–Ω–¥–æ–≥–µ–Ω–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –ù–ò–û–ö–† —Å–æ–∑–¥–∞—é—Ç –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –≤–Ω–µ—à–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É—é—Ç –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–º—É —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–º—É —Ä–æ—Å—Ç—É —á–µ—Ä–µ–∑ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å.",
                    history: "–°–®–ê –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ $600 –º–ª—Ä–¥ –Ω–∞ R&D –≤ 2020 –≥–æ–¥—É (3.4% –í–í–ü), —á—Ç–æ –ø–æ–º–æ–≥–ª–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–∏–¥–µ—Ä—Å—Ç–≤–æ –≤ –±–∏–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö, –∫–æ—Å–º–æ—Å–µ –∏ –∫–≤–∞–Ω—Ç–æ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ä–æ—Å—Ç –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π."
                }
            ]
        }
        // ... –µ—â–µ 32 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è –¥–ª—è –°–®–ê
    ],
    
    CN: [
        {
            id: "cn-manufacturing-overcapacity",
            text: "–ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –º–æ—â–Ω–æ—Å—Ç–∏ –≤ —Å—Ç–∞–ª–µ–ª–∏—Ç–µ–π–Ω–æ–π –æ—Ç—Ä–∞—Å–ª–∏. –ß—Ç–æ –¥–µ–ª–∞—Ç—å?",
            choices: [
                {
                    id: "export-surplus",
                    icon: "fa-solid fa-ship",
                    label: "–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–ª–∏—à–∫–∏",
                    hint: "–î–µ–º–ø–∏–Ω–≥ –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–º —Ä—ã–Ω–∫–µ",
                    effect: { gdp: 0.8, exp: 2.5, imp: -0.2, cpi: -0.3, unemployment: -1.0 },
                    tags: ["—ç–∫—Å–ø–æ—Ä—Ç", "–¥–µ–º–ø–∏–Ω–≥"],
                    economicTheory: "–≠–∫—Å–ø–æ—Ä—Ç –∏–∑–ª–∏—à–∫–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç –º–∞—Å—à—Ç–∞–±–∞ –∏ —Å–Ω–∏–∑–∏—Ç—å –∏–∑–¥–µ—Ä–∂–∫–∏, –Ω–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å —Ç–æ—Ä–≥–æ–≤—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏ –∞–Ω—Ç–∏–¥–µ–º–ø–∏–Ω–≥–æ–≤—ã–µ –º–µ—Ä—ã —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤.",
                    history: "–ö–∏—Ç–∞–π –≤ 2015-2018 –≥–æ–¥–∞—Ö —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª –∏–∑–±—ã—Ç–æ—á–Ω—É—é —Å—Ç–∞–ª—å, —á—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É –ø–∞–¥–µ–Ω–∏—é —Ü–µ–Ω –Ω–∞ 30% –∏ –∞–Ω—Ç–∏–¥–µ–º–ø–∏–Ω–≥–æ–≤—ã–º –º–µ—Ä–∞–º –±–æ–ª–µ–µ —á–µ–º 40 —Å—Ç—Ä–∞–Ω. –≠—Ç–æ –≤—ã–Ω—É–¥–∏–ª–æ –ö–∏—Ç–∞–π —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –Ω–∞ 150 –º–ª–Ω —Ç–æ–Ω–Ω –∫ 2020 –≥–æ–¥—É."
                }
            ]
        }
        // ... –µ—â–µ 32 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è –¥–ª—è –ö–∏—Ç–∞—è
    ],
    
    // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω...
    DE: [], JP: [], RU: [], BR: []
};

// –°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
const randomEvents = [
    {
        id: "global-recession",
        text: "–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ä–µ—Ü–µ—Å—Å–∏—è –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –≤—Å–µ —ç–∫–æ–Ω–æ–º–∏–∫–∏ –º–∏—Ä–∞",
        effect: { gdp: -1.5, exp: -2.0, imp: -1.8, cpi: -0.5, unemployment: 1.8 },
        probability: 0.05
    },
    {
        id: "tech-breakthrough",
        text: "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ä—ã–≤ –ø–æ–≤—ã—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
        effect: { gdp: 2.2, exp: 1.5, imp: 0.8, cpi: -0.3, unemployment: -1.2 },
        probability: 0.03
    },
    {
        id: "natural-disaster",
        text: "–°—Ç–∏—Ö–∏–π–Ω–æ–µ –±–µ–¥—Å—Ç–≤–∏–µ –Ω–∞—Ä—É—à–∞–µ—Ç —Ü–µ–ø–æ—á–∫–∏ –ø–æ—Å—Ç–∞–≤–æ–∫",
        effect: { gdp: -0.8, exp: -1.2, imp: 0.5, cpi: 0.6, unemployment: 0.4 },
        probability: 0.08
    },
    {
        id: "oil-shock",
        text: "–ù–µ—Ñ—Ç—è–Ω–æ–π —à–æ–∫ —É–¥–≤–∞–∏–≤–∞–µ—Ç —Ü–µ–Ω—ã –Ω–∞ —ç–Ω–µ—Ä–≥–æ—Ä–µ—Å—É—Ä—Å—ã",
        effect: { gdp: -1.2, exp: -0.5, imp: -0.8, cpi: 1.8, unemployment: 0.9 },
        probability: 0.06
    },
    {
        id: "trade-agreement",
        text: "–ó–∞–∫–ª—é—á–µ–Ω–æ –Ω–æ–≤–æ–µ —Ç–æ—Ä–≥–æ–≤–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ —Å –∫—Ä—É–ø–Ω—ã–º –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º",
        effect: { gdp: 1.0, exp: 2.5, imp: 1.8, cpi: 0.2, unemployment: -0.6 },
        probability: 0.04
    },
    {
        id: "currency-crisis",
        text: "–í–∞–ª—é—Ç–Ω—ã–π –∫—Ä–∏–∑–∏—Å –≤ —Å–æ—Å–µ–¥–Ω–µ–π —Å—Ç—Ä–∞–Ω–µ",
        effect: { gdp: -0.6, exp: -1.0, imp: 0.3, cpi: 0.4, unemployment: 0.3 },
        probability: 0.07
    },
    {
        id: "cyber-attack",
        text: "–ö–∏–±–µ—Ä–∞—Ç–∞–∫–∞ –ø–∞—Ä–∞–ª–∏–∑—É–µ—Ç —Ç–æ—Ä–≥–æ–≤—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É",
        effect: { gdp: -0.9, exp: -1.8, imp: -1.5, cpi: 0.3, unemployment: 0.2 },
        probability: 0.05
    },
    {
        id: "pandemic-restrictions",
        text: "–ü–∞–Ω–¥–µ–º–∏–π–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–Ω–∏–∂–∞—é—Ç —Ç–æ—Ä–≥–æ–≤—ã–µ –ø–æ—Ç–æ–∫–∏",
        effect: { gdp: -2.5, exp: -3.2, imp: -2.8, cpi: 0.8, unemployment: 2.5 },
        probability: 0.02
    },
    {
        id: "green-transition",
        text: "–ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –∑–µ–ª–µ–Ω–æ–π —ç–∫–æ–Ω–æ–º–∏–∫–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Ä—ã–Ω–∫–∏",
        effect: { gdp: 1.5, exp: 1.2, imp: 0.9, cpi: 0.1, unemployment: -0.8 },
        probability: 0.06
    },
    {
        id: "trade-bloc-formation",
        text: "–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–ª–æ–∫–∞ –∏–∑–º–µ–Ω—è–µ—Ç –ø–æ—Ç–æ–∫–∏",
        effect: { gdp: 0.3, exp: -0.8, imp: -0.5, cpi: 0.2, unemployment: 0.1 },
        probability: 0.04
    }
];

// –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
let gameState = {
    currentScreen: 'start',
    selectedCountry: null,
    gameMode: 'normal',
    totalSteps: 15,
    currentTurn: 0,
    currentScenario: null,
    selectedChoice: null,
    economicState: { ...gameData.baseState },
    trust: 50,
    history: [],
    charts: {},
    usedScenarios: [],
    theme: 'auto',
    scenarioSequence: [],
    randomEventsEnabled: true,
    detailedLog: []
};

// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–∞—Å—Ö–∞–ª–∫–∏
let logoTapCount = 0;
let logoTapTimer = null;
let keySequence = '';
let keySequenceTimer = null;
let keySequenceActive = false;

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã...');
    initializeGame();
});

function initializeGame() {
    renderCountries();
    setupEventListeners();
    initializeTheme();
    setupEasterEgg();
    showScreen('start');
}

// –°–∏—Å—Ç–µ–º–∞ —Ç–µ–º
function initializeTheme() {
    const savedTheme = localStorage.getItem('trade-wars-theme') || 'auto';
    gameState.theme = savedTheme;
    applyTheme(savedTheme);
    updateThemeIcon(savedTheme);
}

function applyTheme(theme) {
    const root = document.documentElement;
    if (theme === 'dark') {
        root.setAttribute('data-color-scheme', 'dark');
    } else if (theme === 'light') {
        root.setAttribute('data-color-scheme', 'light');
    } else {
        root.removeAttribute('data-color-scheme');
    }
}

function updateThemeIcon(theme) {
    const icon = document.querySelector('#themeToggle i');
    if (!icon) return;
    
    icon.className = theme === 'dark' ? 'fas fa-moon' : 
                     theme === 'light' ? 'fas fa-sun' : 
                     'fas fa-circle-half-stroke';
}

function toggleTheme() {
    const themes = ['auto', 'light', 'dark'];
    const currentIndex = themes.indexOf(gameState.theme);
    const nextTheme = themes[(currentIndex + 1) % themes.length];
    
    gameState.theme = nextTheme;
    localStorage.setItem('trade-wars-theme', nextTheme);
    applyTheme(nextTheme);
    updateThemeIcon(nextTheme);
}

// –ü–∞—Å—Ö–∞–ª–∫–∞
function setupEasterEgg() {
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ü–ö (Ctrl + Shift + R, –∑–∞—Ç–µ–º "6tr0")
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.shiftKey && e.key === 'R') {
            e.preventDefault();
            keySequence = '';
            keySequenceActive = true;
            console.log('Easter egg sequence activated');
            clearTimeout(keySequenceTimer);
            keySequenceTimer = setTimeout(() => {
                keySequence = '';
                keySequenceActive = false;
            }, 5000);
            return;
        }
        
        if (keySequenceActive) {
            keySequence += e.key.toLowerCase();
            console.log('Key sequence:', keySequence);
            if (keySequence.includes('6tr0')) {
                showDragonEasterEgg();
                keySequence = '';
                keySequenceActive = false;
                clearTimeout(keySequenceTimer);
            }
        }
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (5 —Ç–∞–ø–æ–≤ –ø–æ –ª–æ–≥–æ + –¥–æ–ª–≥–∏–π —Ç–∞–ø)
    const logoSection = document.getElementById('logoSection');
    if (logoSection) {
        logoSection.addEventListener('click', handleLogoTap);
        logoSection.addEventListener('touchend', handleLogoTap);
        
        // –î–æ–ª–≥–∏–π —Ç–∞–ø
        let longTapTimer;
        
        logoSection.addEventListener('mousedown', function() {
            if (logoTapCount >= 5) {
                longTapTimer = setTimeout(() => {
                    showDragonEasterEgg();
                    logoTapCount = 0;
                }, 2000);
            }
        });
        
        logoSection.addEventListener('touchstart', function() {
            if (logoTapCount >= 5) {
                longTapTimer = setTimeout(() => {
                    showDragonEasterEgg();
                    logoTapCount = 0;
                }, 2000);
            }
        });
        
        logoSection.addEventListener('mouseup', function() {
            clearTimeout(longTapTimer);
        });
        
        logoSection.addEventListener('touchend', function() {
            clearTimeout(longTapTimer);
        });
    }
}

function handleLogoTap(e) {
    e.preventDefault();
    logoTapCount++;
    console.log('Logo tap count:', logoTapCount);
    
    clearTimeout(logoTapTimer);
    logoTapTimer = setTimeout(() => {
        logoTapCount = 0;
    }, 3000);
    
    if (logoTapCount >= 5) {
        logoTapCount = 5; // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞ 5
    }
}

function showDragonEasterEgg() {
    console.log('Showing dragon easter egg!');
    const dragon = document.getElementById('dragonEasterEgg');
    if (dragon) {
        dragon.classList.remove('hidden');
        setTimeout(() => {
            dragon.classList.add('hidden');
        }, 3000);
    }
}

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
function generateScenarioSequence(countryCode, gameMode) {
    if (gameMode === 'normal') {
        // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä 15 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
        gameState.totalSteps = 15;
        return extendedScenarios.general.slice(0, 15).map(s => s.id);
    } else {
        // –°–ª—É—á–∞–π–Ω—ã–π –Ω–∞–±–æ—Ä –¥–ª—è hard/blind —Ä–µ–∂–∏–º–æ–≤
        gameState.totalSteps = 100;
        const countryScenarios = extendedScenarios[countryCode] || [];
        const generalScenarios = extendedScenarios.general;
        
        // 1/3 –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ, 2/3 –æ–±—â–∏–µ
        const individualCount = Math.floor(gameState.totalSteps / 3);
        const generalCount = gameState.totalSteps - individualCount;
        
        const selectedIndividual = shuffleArray(countryScenarios)
            .slice(0, Math.min(individualCount, countryScenarios.length));
        const selectedGeneral = shuffleArray(generalScenarios)
            .slice(0, generalCount);
        
        const combined = [...selectedIndividual, ...selectedGeneral];
        return shuffleArray(combined).map(s => s.id || s);
    }
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è –º–∞—Å—Å–∏–≤–∞
function shuffleArray(array) {
    let arr = array.slice();
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
}

// –ü–æ–∏—Å–∫ —Å—Ü–µ–Ω–∞—Ä–∏—è –ø–æ ID
function findScenario(id) {
    // –ò—â–µ–º –≤ –æ–±—â–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö
    let scenario = extendedScenarios.general.find(s => s.id === id);
    if (scenario) return scenario;
    
    // –ò—â–µ–º –≤ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö
    for (let country of Object.keys(extendedScenarios)) {
        if (country === 'general') continue;
        scenario = extendedScenarios[country].find(s => s.id === id);
        if (scenario) return scenario;
    }
    
    // –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–≤—ã–π –æ–±—â–∏–π
    return extendedScenarios.general[0];
}

function renderCountries() {
    const countriesGrid = document.getElementById('countriesGrid');
    if (!countriesGrid) return;
    
    countriesGrid.innerHTML = '';
    
    Object.entries(gameData.countries).forEach(([code, country]) => {
        const countryCard = document.createElement('div');
        countryCard.className = 'country-card';
        countryCard.setAttribute('data-country', code);
        
        countryCard.innerHTML = `
            <div class="country-difficulty">${country.difficulty}</div>
            <div class="country-flag">${country.flag}</div>
            <h3 class="country-name">${country.name}</h3>
            <p class="country-specialties">${country.specialties.join(', ')}</p>
            <div class="country-bonus">+${country.bonus} –±–æ–Ω—É—Å–Ω—ã—Ö –æ—á–∫–æ–≤</div>
        `;
        
        countryCard.addEventListener('click', function() {
            selectCountry(code);
        });
        
        countriesGrid.appendChild(countryCard);
    });
}

function selectCountry(countryCode) {
    // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
    document.querySelectorAll('.country-card').forEach(card => {
        card.classList.remove('selected');
    });
    
    // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É
    const selectedCard = document.querySelector(`[data-country="${countryCode}"]`);
    if (selectedCard) {
        selectedCard.classList.add('selected');
    }
    
    gameState.selectedCountry = countryCode;
    updateStartButton();
}

function setupEventListeners() {
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–µ–∂–∏–º–æ–≤ –∏–≥—Ä—ã
    document.querySelectorAll('input[name="gameMode"]').forEach(radio => {
        radio.addEventListener('change', function() {
            gameState.gameMode = this.value;
            updateStartButton();
        });
    });
}

function updateStartButton() {
    const startBtn = document.getElementById('startGameBtn');
    const isReady = gameState.selectedCountry && gameState.gameMode;
    
    if (startBtn) {
        startBtn.disabled = !isReady;
        if (isReady) {
            startBtn.classList.remove('btn--disabled');
        } else {
            startBtn.classList.add('btn--disabled');
        }
    }
}

function startGame() {
    if (!gameState.selectedCountry || !gameState.gameMode) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É –∏ —Ä–µ–∂–∏–º –∏–≥—Ä—ã');
        return;
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    const country = gameData.countries[gameState.selectedCountry];
    gameState.economicState = { ...gameData.baseState };
    gameState.trust = 50;
    gameState.currentTurn = 0;
    gameState.history = [];
    gameState.detailedLog = [];
    gameState.usedScenarios = [];
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º –±–∞–∑–æ–≤—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç—Ä–∞–Ω—ã
    Object.entries(country.base_modifiers).forEach(([key, value]) => {
        gameState.economicState[key] += value;
    });
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
    gameState.scenarioSequence = generateScenarioSequence(gameState.selectedCountry, gameState.gameMode);
    
    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –∏–≥—Ä–æ–≤–æ–º—É —ç–∫—Ä–∞–Ω—É
    showScreen('game');
    updateGameUI();
    nextScenario();
}

function showScreen(screenId) {
    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
    document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.remove('active');
    });
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π —ç–∫—Ä–∞–Ω
    const targetScreen = document.getElementById(screenId + 'Screen');
    if (targetScreen) {
        targetScreen.classList.add('active');
        gameState.currentScreen = screenId;
    }
}

function updateGameUI() {
    const country = gameData.countries[gameState.selectedCountry];
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
    const gameTitle = document.getElementById('gameTitle');
    if (gameTitle) {
        gameTitle.textContent = `${country.flag} ${country.name}`;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ö–æ–¥–µ
    const turnInfo = document.getElementById('turnInfo');
    if (turnInfo) {
        turnInfo.textContent = `–•–æ–¥ ${gameState.currentTurn + 1} –∏–∑ ${gameState.totalSteps}`;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
    const progressFill = document.getElementById('progressFill');
    if (progressFill) {
        const progress = (gameState.currentTurn / gameState.totalSteps) * 100;
        progressFill.style.width = `${progress}%`;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
    updateIndicators();
}

function updateIndicators() {
    const indicators = {
        gdp: { element: document.getElementById('gdpIndicator'), value: gameState.economicState.gdpIdx, suffix: '' },
        exp: { element: document.getElementById('expIndicator'), value: gameState.economicState.expIdx, suffix: '' },
        imp: { element: document.getElementById('impIndicator'), value: gameState.economicState.impIdx, suffix: '' },
        cpi: { element: document.getElementById('cpiIndicator'), value: gameState.economicState.cpi, suffix: '%' },
        unemployment: { element: document.getElementById('unemploymentIndicator'), value: gameState.economicState.unemployment, suffix: '%' },
        trust: { element: document.getElementById('trustIndicator'), value: gameState.trust, suffix: '' }
    };
    
    Object.entries(indicators).forEach(([key, data]) => {
        if (!data.element) return;
        
        const valueElement = data.element.querySelector('.value');
        if (valueElement) {
            valueElement.textContent = data.value.toFixed(1) + data.suffix;
        }
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å—ã –¥–ª—è —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏
        data.element.classList.remove('positive', 'negative');
        if (key === 'trust') {
            if (data.value > 60) data.element.classList.add('positive');
            else if (data.value < 40) data.element.classList.add('negative');
        }
    });
}

function nextScenario() {
    if (gameState.currentTurn >= gameState.totalSteps) {
        endGame();
        return;
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ
    if (gameState.randomEventsEnabled && Math.random() < 0.15) {
        const randomEvent = selectRandomEvent();
        if (randomEvent) {
            showRandomEvent(randomEvent);
            return;
        }
    }
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π
    const scenarioId = gameState.scenarioSequence[gameState.currentTurn];
    const scenario = findScenario(scenarioId);
    
    gameState.currentScenario = scenario;
    gameState.selectedChoice = null;
    
    displayScenario(scenario);
}

function selectRandomEvent() {
    const availableEvents = randomEvents.filter(event => 
        Math.random() < event.probability
    );
    
    if (availableEvents.length === 0) return null;
    
    return availableEvents[Math.floor(Math.random() * availableEvents.length)];
}

function showRandomEvent(event) {
    const eventCard = document.getElementById('randomEventCard');
    const eventText = document.getElementById('randomEventText');
    
    if (eventCard && eventText) {
        eventText.textContent = event.text;
        eventCard.style.display = 'block';
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã —Å–æ–±—ã—Ç–∏—è
        applyEffects(event.effect);
        
        // –õ–æ–≥–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏–µ
        gameState.detailedLog.push({
            turn: gameState.currentTurn + 1,
            type: 'random_event',
            title: '–°–ª—É—á–∞–π–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ',
            description: event.text,
            effects: event.effect
        });
        
        // –°–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
        setTimeout(() => {
            eventCard.style.display = 'none';
            nextScenario();
        }, 3000);
    }
}

function displayScenario(scenario) {
    const scenarioTitle = document.getElementById('scenarioTitle');
    const scenarioText = document.getElementById('scenarioText');
    const choicesContainer = document.getElementById('choicesContainer');
    
    if (scenarioTitle) scenarioTitle.textContent = scenario.text;
    if (scenarioText) scenarioText.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω–æ –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π:';
    
    // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—ã–±–æ—Ä–æ–≤
    if (choicesContainer) {
        choicesContainer.innerHTML = '';
        
        scenario.choices.forEach(choice => {
            const choiceCard = document.createElement('div');
            choiceCard.className = 'choice-card';
            choiceCard.setAttribute('data-choice', choice.id);
            
            choiceCard.innerHTML = `
                <div class="choice-header">
                    <i class="${choice.icon}"></i>
                    <h3>${choice.label}</h3>
                </div>
                <p class="choice-hint">${choice.hint}</p>
            `;
            
            choiceCard.addEventListener('click', function() {
                selectChoice(choice);
            });
            
            choicesContainer.appendChild(choiceCard);
        });
    }
    
    // –°–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –ø—Ä–∏ –Ω–æ–≤–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏
    document.getElementById('effectsPanel').style.display = 'none';
}

function selectChoice(choice) {
    console.log('–í—ã–±—Ä–∞–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ:', choice.label);
    
    // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
    document.querySelectorAll('.choice-card').forEach(card => {
        card.classList.remove('selected');
    });
    
    // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É
    const selectedCard = document.querySelector(`[data-choice="${choice.id}"]`);
    if (selectedCard) {
        selectedCard.classList.add('selected');
    }
    
    gameState.selectedChoice = choice;
    showEffects(choice);
}

function showEffects(choice) {
    const effectsPanel = document.getElementById('effectsPanel');
    const effectsGrid = document.getElementById('effectsGrid');
    const economicTheoryText = document.getElementById('economicTheoryText');
    const historicalText = document.getElementById('historicalText');
    const nextBtn = document.getElementById('nextTurnBtn');
    
    effectsGrid.innerHTML = '';
    
    if (gameState.gameMode !== 'blind') {
        let effects = choice.effect;
        if (gameState.gameMode === 'hard') {
            effects = multiplyEffects(choice.effect, 1.5);
        }
        
        const labels = {
            gdp: '–í–í–ü',
            exp: '–≠–∫—Å–ø–æ—Ä—Ç', 
            imp: '–ò–º–ø–æ—Ä—Ç',
            cpi: '–ò–Ω—Ñ–ª—è—Ü–∏—è',
            unemployment: '–ë–µ–∑—Ä–∞–±–æ—Ç–∏—Ü–∞'
        };
        
        Object.entries(effects).forEach(([key, value]) => {
            const effectItem = document.createElement('div');
            effectItem.className = `effect-item ${value > 0 ? 'positive' : value < 0 ? 'negative' : 'neutral'}`;
            
            const sign = value > 0 ? '+' : '';
            const suffix = ['cpi', 'unemployment'].includes(key) ? '%' : '';
            
            effectItem.innerHTML = `
                <div>${labels[key]}</div>
                <div>${sign}${value.toFixed(1)}${suffix}</div>
            `;
            
            effectsGrid.appendChild(effectItem);
        });
    } else {
        effectsGrid.innerHTML = '<p>–≠—Ñ—Ñ–µ–∫—Ç—ã —Å–∫—Ä—ã—Ç—ã –≤ —Å–ª–µ–ø–æ–º —Ä–µ–∂–∏–º–µ</p>';
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–æ—Ä–∏—é –∏ –∏—Å—Ç–æ—Ä–∏—é
    if (economicTheoryText) {
        economicTheoryText.textContent = choice.economicTheory || '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞';
    }
    
    if (historicalText) {
        historicalText.textContent = choice.history || '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞';
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –∏ –∫–Ω–æ–ø–∫—É
    effectsPanel.style.display = 'block';
    nextBtn.style.display = 'block';
}

function multiplyEffects(effects, multiplier) {
    const result = {};
    Object.entries(effects).forEach(([key, value]) => {
        result[key] = value * multiplier;
    });
    return result;
}

function nextTurn() {
    if (!gameState.selectedChoice) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ');
        return;
    }
    
    const choice = gameState.selectedChoice;
    let effects = choice.effect;
    
    if (gameState.gameMode === 'hard') {
        effects = multiplyEffects(effects, 1.5);
    }
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã
    applyEffects(effects);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –¥–æ–≤–µ—Ä–∏–µ
    updateTrust(choice.tags || []);
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
    const historyEntry = {
        turn: gameState.currentTurn + 1,
        scenario: gameState.currentScenario.text,
        choice: choice.label,
        effects: effects,
        state: { ...gameState.economicState },
        trust: gameState.trust
    };
    
    gameState.history.push(historyEntry);
    
    // –ü–æ–¥—Ä–æ–±–Ω—ã–π –ª–æ–≥
    gameState.detailedLog.push({
        turn: gameState.currentTurn + 1,
        type: 'decision',
        title: gameState.currentScenario.text,
        description: `–í—ã–±—Ä–∞–Ω–æ: ${choice.label}`,
        effects: effects,
        reasoning: choice.hint
    });
    
    // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ —Ö–æ–¥–æ–≤
    gameState.currentTurn++;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º UI
    updateGameUI();
    updateCharts();
    
    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å—Ü–µ–Ω–∞—Ä–∏—é
    if (gameState.currentTurn < gameState.totalSteps) {
        setTimeout(() => {
            nextScenario();
        }, 500);
    } else {
        setTimeout(() => {
            endGame();
        }, 1000);
    }
}

function applyEffects(effects) {
    Object.entries(effects).forEach(([key, value]) => {
        if (key in gameState.economicState) {
            gameState.economicState[key] += value;
            
            // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
            if (key === 'cpi' && gameState.economicState[key] < -2) {
                gameState.economicState[key] = -2; // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–ª—è—Ü–∏—è
            }
            if (key === 'unemployment' && gameState.economicState[key] < 0) {
                gameState.economicState[key] = 0; // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑—Ä–∞–±–æ—Ç–∏—Ü–∞
            }
        }
    });
}

function updateTrust(tags) {
    let trustChange = 0;
    
    tags.forEach(tag => {
        if (tag in gameData.trustWeights) {
            trustChange += gameData.trustWeights[tag];
        }
    });
    
    gameState.trust = Math.max(0, Math.min(100, gameState.trust + trustChange));
}

function updateCharts() {
    // –û–±–Ω–æ–≤–ª—è–µ–º –≥—Ä–∞—Ñ–∏–∫–∏ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
    // –í –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∫–æ–¥ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Chart.js –≥—Ä–∞—Ñ–∏–∫–æ–≤
}

function endGame() {
    calculateFinalScore();
    showResults();
    showScreen('results');
}

function calculateFinalScore() {
    const changes = {
        gdp: gameState.economicState.gdpIdx - gameData.baseState.gdpIdx,
        exp: gameState.economicState.expIdx - gameData.baseState.expIdx,
        imp: gameState.economicState.impIdx - gameData.baseState.impIdx,
        cpi: gameState.economicState.cpi - gameData.baseState.cpi,
        unemployment: gameState.economicState.unemployment - gameData.baseState.unemployment
    };
    
    // –ë–∞–∑–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ (0-60)
    let baseScore = 30; // –ë–∞–∑–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞
    baseScore += Math.max(-15, Math.min(15, changes.gdp * 0.5));
    baseScore += Math.max(-10, Math.min(10, changes.exp * 0.3));
    baseScore += Math.max(-10, Math.min(10, -changes.unemployment * 2));
    baseScore += Math.max(-10, Math.min(10, -Math.abs(changes.cpi) * 2));
    baseScore += Math.max(-15, Math.min(15, gameState.trust / 100 * 30));
    
    // –ë–æ–Ω—É—Å –∑–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç—å (0-15)
    const country = gameData.countries[gameState.selectedCountry];
    const countryBonus = country.bonus;
    
    // –ë–æ–Ω—É—Å –∑–∞ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–µ—à–µ–Ω–∏–π (0-20)
    const performanceBonus = Math.min(20, gameState.history.length > 0 ? 
        gameState.history.reduce((sum, h) => sum + (h.choice.includes('–ø–µ—Ä–µ–≥–æ–≤–æ—Ä') ? 2 : 1), 0) / gameState.history.length * 10 : 0);
    
    // –ë–æ–Ω—É—Å –∑–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (0-5)
    const consistencyBonus = 5; // –£–ø—Ä–æ—â–µ–Ω–Ω–æ
    
    const finalScore = Math.max(0, Math.min(100, baseScore + countryBonus + performanceBonus + consistencyBonus));
    
    gameState.finalScore = Math.round(finalScore);
    gameState.changes = changes;
    gameState.scoreBreakdown = {
        baseScore: Math.round(baseScore),
        countryBonus,
        performanceBonus: Math.round(performanceBonus),
        consistencyBonus: Math.round(consistencyBonus)
    };
}

function showResults() {
    const country = gameData.countries[gameState.selectedCountry];
    const state = gameState.economicState;
    const changes = gameState.changes;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
    const resultsFlagLarge = document.getElementById('resultsFlagLarge');
    const resultsCountryName = document.getElementById('resultsCountryName');
    
    if (resultsFlagLarge) resultsFlagLarge.textContent = country.flag;
    if (resultsCountryName) resultsCountryName.textContent = country.name;
    
    // –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
    const scoreValue = document.getElementById('scoreValue');
    const scoreDescription = document.getElementById('scoreDescription');
    const scoreBreakdown = document.getElementById('scoreBreakdown');
    const scoreCard = document.getElementById('scoreCard');
    
    if (scoreValue) scoreValue.textContent = gameState.finalScore;
    if (scoreDescription) scoreDescription.textContent = getScoreDescription();
    if (scoreBreakdown) {
        const breakdown = gameState.scoreBreakdown;
        scoreBreakdown.innerHTML = `
            –ë–∞–∑–æ–≤—ã–µ –æ—á–∫–∏: ${breakdown.baseScore}/60<br>
            –ë–æ–Ω—É—Å –∑–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç—å: ${breakdown.countryBonus}/15<br>
            –ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ—à–µ–Ω–∏–π: ${breakdown.performanceBonus}/20<br>
            –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ${breakdown.consistencyBonus}/5
        `;
    }
    
    // –ö–ª–∞—Å—Å –∫–∞—Ä—Ç–æ—á–∫–∏ –æ—Ü–µ–Ω–∫–∏
    if (scoreCard) {
        scoreCard.className = 'score-card';
        if (gameState.finalScore >= 80) scoreCard.classList.add('excellent');
        else if (gameState.finalScore >= 60) scoreCard.classList.add('good');
        else if (gameState.finalScore >= 40) scoreCard.classList.add('average');
        else scoreCard.classList.add('poor');
    }
    
    // –î–æ–≤–µ—Ä–∏–µ
    const trustValue = document.getElementById('trustValue');
    const trustExplanation = document.getElementById('trustExplanation');
    
    if (trustValue) trustValue.textContent = Math.round(gameState.trust);
    if (trustExplanation) trustExplanation.textContent = getTrustExplanation();
    
    // –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
    updateFinalIndicators();
    
    // –õ–æ–≥ —Ö–æ–¥–æ–≤
    generateMovesLog();
    
    // –ü–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑
    generateDetailedAnalysis();
    
    // –ò—Ç–æ–≥–æ–≤—ã–π –≥—Ä–∞—Ñ–∏–∫
    createFinalChart();
}

function updateFinalIndicators() {
    const indicators = [
        { id: 'finalGdp', changeId: 'gdpChange', value: gameState.economicState.gdpIdx, change: gameState.changes.gdp, suffix: '' },
        { id: 'finalExp', changeId: 'expChange', value: gameState.economicState.expIdx, change: gameState.changes.exp, suffix: '' },
        { id: 'finalImp', changeId: 'impChange', value: gameState.economicState.impIdx, change: gameState.changes.imp, suffix: '' },
        { id: 'finalCpi', changeId: 'cpiChange', value: gameState.economicState.cpi, change: gameState.changes.cpi, suffix: '%' },
        { id: 'finalUnemployment', changeId: 'unemploymentChange', value: gameState.economicState.unemployment, change: gameState.changes.unemployment, suffix: '%' }
    ];
    
    indicators.forEach(indicator => {
        const valueElement = document.getElementById(indicator.id);
        const changeElement = document.getElementById(indicator.changeId);
        
        if (valueElement) valueElement.textContent = indicator.value.toFixed(1) + indicator.suffix;
        if (changeElement) {
            const sign = indicator.change > 0 ? '+' : '';
            changeElement.textContent = sign + indicator.change.toFixed(1) + indicator.suffix;
            changeElement.className = `change-value ${getChangeClass(indicator.change, ['unemployment', 'cpi'].includes(indicator.changeId.replace('Change', '')))}`;
        }
    });
}

function generateMovesLog() {
    const movesLogContent = document.getElementById('movesLogContent');
    if (!movesLogContent) return;
    
    movesLogContent.innerHTML = '';
    
    gameState.detailedLog.forEach((entry, index) => {
        const moveEntry = document.createElement('div');
        moveEntry.className = 'move-entry';
        
        const typeIcon = entry.type === 'random_event' ? 'fa-bolt' : 'fa-chess-pawn';
        
        moveEntry.innerHTML = `
            <div class="move-number">
                <i class="fas ${typeIcon}"></i>
            </div>
            <div class="move-details">
                <h4>–•–æ–¥ ${entry.turn}: ${entry.title}</h4>
                <p>${entry.description}</p>
                ${entry.reasoning ? `<p><strong>–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:</strong> ${entry.reasoning}</p>` : ''}
            </div>
        `;
        
        movesLogContent.appendChild(moveEntry);
    });
}

function generateDetailedAnalysis() {
    const analysisContent = document.getElementById('analysisContent');
    if (!analysisContent) return;
    
    analysisContent.innerHTML = '';
    
    // –ê–Ω–∞–ª–∏–∑ —Ç–æ—Ä–≥–æ–≤–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏
    const tradeSection = document.createElement('div');
    tradeSection.className = 'analysis-section';
    tradeSection.innerHTML = `
        <h4>–¢–æ—Ä–≥–æ–≤–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞</h4>
        <p>${analyzeTradePolicies()}</p>
    `;
    analysisContent.appendChild(tradeSection);
    
    // –ê–Ω–∞–ª–∏–∑ –¥–∏–ø–ª–æ–º–∞—Ç–∏–∏
    const diplomacySection = document.createElement('div');
    diplomacySection.className = 'analysis-section';
    diplomacySection.innerHTML = `
        <h4>–î–∏–ø–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è</h4>
        <p>${analyzeDiplomacy()}</p>
    `;
    analysisContent.appendChild(diplomacySection);
    
    // –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã
    const strengthsSection = document.createElement('div');
    strengthsSection.className = 'analysis-section strengths';
    strengthsSection.innerHTML = `
        <h4>–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã</h4>
        <p>${analyzeStrengths()}</p>
    `;
    analysisContent.appendChild(strengthsSection);
    
    // –°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã
    const weaknessesSection = document.createElement('div');
    weaknessesSection.className = 'analysis-section weaknesses';
    weaknessesSection.innerHTML = `
        <h4>–û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è</h4>
        <p>${analyzeWeaknesses()}</p>
    `;
    analysisContent.appendChild(weaknessesSection);
    
    // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    const recommendationsSection = document.createElement('div');
    recommendationsSection.className = 'analysis-section recommendations';
    recommendationsSection.innerHTML = `
        <h4>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h4>
        <p>${generateRecommendations()}</p>
    `;
    analysisContent.appendChild(recommendationsSection);
}

function analyzeTradePolicies() {
    const history = gameState.history;
    let protectionistMoves = 0;
    let opennessMoves = 0;
    
    history.forEach(turn => {
        if (turn.choice.toLowerCase().includes('—Ç–∞—Ä–∏—Ñ') || 
            turn.choice.toLowerCase().includes('–ø–æ—à–ª–∏–Ω') || 
            turn.choice.toLowerCase().includes('–∑–∞—â–∏—Ç')) {
            protectionistMoves++;
        }
        if (turn.choice.toLowerCase().includes('–ø–µ—Ä–µ–≥–æ–≤') || 
            turn.choice.toLowerCase().includes('—Å–æ—Ç—Ä—É–¥') || 
            turn.choice.toLowerCase().includes('–æ—Ç–∫—Ä')) {
            opennessMoves++;
        }
    });
    
    if (protectionistMoves > opennessMoves) {
        return `–í—ã –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–ª–∏—Å—å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–æ—Ç–µ–∫—Ü–∏–æ–Ω–∏—Å—Ç—Å–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ (${protectionistMoves} –∑–∞—â–∏—Ç–Ω—ã—Ö –º–µ—Ä –ø—Ä–æ—Ç–∏–≤ ${opennessMoves} –æ—Ç–∫—Ä—ã—Ç—ã—Ö). –≠—Ç–æ –∑–∞—â–∏—Ç–∏–ª–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Ä–∞—Å–ª–∏, –Ω–æ –º–æ–≥–ª–æ —Å–Ω–∏–∑–∏—Ç—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —ç–∫–æ–Ω–æ–º–∏–∫–∏ –∏ –≤—ã–∑–≤–∞—Ç—å —Ç–æ—Ä–≥–æ–≤—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã.`;
    } else if (opennessMoves > protectionistMoves) {
        return `–í–∞—à–∞ —Ç–æ—Ä–≥–æ–≤–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ –±—ã–ª–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ (${opennessMoves} –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ä–µ—à–µ–Ω–∏–π –ø—Ä–æ—Ç–∏–≤ ${protectionistMoves} –∑–∞—â–∏—Ç–Ω—ã—Ö). –≠—Ç–æ —Å–ø–æ—Å–æ–±—Å—Ç–≤–æ–≤–∞–ª–æ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, –Ω–æ –º–æ–≥–ª–æ —Å–æ–∑–¥–∞—Ç—å —É—è–∑–≤–∏–º–æ—Å—Ç—å –¥–ª—è –æ—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π.`;
    } else {
        return `–í—ã –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Ç–æ—Ä–≥–æ–≤–æ–π –ø–æ–ª–∏—Ç–∏–∫–µ, –∫–æ–º–±–∏–Ω–∏—Ä—É—è –∑–∞—â–∏—Ç–Ω—ã–µ –º–µ—Ä—ã —Å –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å—é –∫ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤—É. –≠—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π.`;
    }
}

function analyzeDiplomacy() {
    const trustLevel = gameState.trust;
    const history = gameState.history;
    let cooperativeMoves = history.filter(turn => 
        turn.choice.toLowerCase().includes('–ø–µ—Ä–µ–≥–æ–≤') || 
        turn.choice.toLowerCase().includes('—Å–æ—Ç—Ä—É–¥') || 
        turn.choice.toLowerCase().includes('–∫–æ–º–ø—Ä–æ–º–∏—Å—Å')
    ).length;
    
    if (trustLevel >= 70) {
        return `–û—Ç–ª–∏—á–Ω–∞—è –¥–∏–ø–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞! –£—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è ${trustLevel} —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤—É–µ—Ç –æ —Ç–æ–º, —á—Ç–æ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–∞—Å –∫–∞–∫ –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–≥–æ –ø–∞—Ä—Ç–Ω–µ—Ä–∞. –í–∞—à–∏ ${cooperativeMoves} –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏—è —Å–ø–æ—Å–æ–±—Å—Ç–≤–æ–≤–∞–ª–∏ —É–∫—Ä–µ–ø–ª–µ–Ω–∏—é –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π.`;
    } else if (trustLevel >= 50) {
        return `–£–º–µ—Ä–µ–Ω–Ω–æ —É—Å–ø–µ—à–Ω–∞—è –¥–∏–ø–ª–æ–º–∞—Ç–∏—è. –£—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è ${trustLevel} –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø–∞—Ä—Ç–Ω–µ—Ä—ã –≤ —Ü–µ–ª–æ–º –≥–æ—Ç–æ–≤—ã –∫ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤—É, –Ω–æ –µ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –æ–ø–∞—Å–µ–Ω–∏—è –ø–æ –ø–æ–≤–æ–¥—É –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤–∞—à–∏—Ö —Ä–µ—à–µ–Ω–∏–π. –ë–æ–ª—å—à–µ –≤–Ω–∏–º–∞–Ω–∏—è –∫ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∞–º –º–æ–≥–ª–æ –±—ã —É–ª—É—á—à–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è.`;
    } else {
        return `–ü—Ä–æ–±–ª–µ–º—ã –≤ –¥–∏–ø–ª–æ–º–∞—Ç–∏–∏. –ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è (${trustLevel}) —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ –º–Ω–æ–≥–∏–µ –≤–∞—à–∏ —Ä–µ—à–µ–Ω–∏—è –±—ã–ª–∏ –≤–æ—Å–ø—Ä–∏–Ω—è—Ç—ã –∫–∞–∫ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –∏–ª–∏ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ. –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞—Ç—Ä—É–¥–Ω–∏—Ç—å –±—É–¥—É—â–µ–µ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–µ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ –∏ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∏–∑–æ–ª—è—Ü–∏–∏.`;
    }
}

function analyzeStrengths() {
    const changes = gameState.changes;
    const strengths = [];
    
    if (changes.gdp > 5) {
        strengths.push('—É—Å–ø–µ—à–Ω–æ–µ —Å—Ç–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–≥–æ —Ä–æ—Å—Ç–∞');
    }
    if (changes.exp > 10) {
        strengths.push('–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞');
    }
    if (changes.unemployment < -2) {
        strengths.push('—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –±–µ–∑—Ä–∞–±–æ—Ç–∏—Ü—ã');
    }
    if (Math.abs(changes.cpi) < 1) {
        strengths.push('–ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –∏–Ω—Ñ–ª—è—Ü–∏–∏');
    }
    if (gameState.trust > 60) {
        strengths.push('—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–≤–µ—Ä–∏—è –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤');
    }
    
    if (strengths.length === 0) {
        return '–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —è–≤–Ω—ã—Ö —Å–∏–ª—å–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω –≤—ã—è–≤–∏—Ç—å –Ω–µ —É–¥–∞–ª–æ—Å—å. –≠—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–∞ –ø–æ–¥—Ö–æ–¥–æ–≤ –∫ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π –ø–æ–ª–∏—Ç–∏–∫–µ.';
    }
    
    return `–í–∞—à–∏ –≥–ª–∞–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è: ${strengths.join(', ')}. –≠—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.`;
}

function analyzeWeaknesses() {
    const changes = gameState.changes;
    const weaknesses = [];
    
    if (changes.gdp < -3) {
        weaknesses.push('—Å–µ—Ä—å–µ–∑–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ –í–í–ü —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏');
    }
    if (changes.unemployment > 3) {
        weaknesses.push('—Ä–æ—Å—Ç –±–µ–∑—Ä–∞–±–æ—Ç–∏—Ü—ã —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤—É–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö –Ω–∞ —Ä—ã–Ω–∫–µ —Ç—Ä—É–¥–∞');
    }
    if (changes.cpi > 3) {
        weaknesses.push('–≤—ã—Å–æ–∫–∞—è –∏–Ω—Ñ–ª—è—Ü–∏—è –ø–æ–¥—Ä—ã–≤–∞–µ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—å–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–∞—Å–µ–ª–µ–Ω–∏—è');
    }
    if (gameState.trust < 40) {
        weaknesses.push('–ø–æ—Ç–µ—Ä—è –¥–æ–≤–µ—Ä–∏—è –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞');
    }
    
    if (weaknesses.length === 0) {
        return '–°–µ—Ä—å–µ–∑–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –æ—à–∏–±–æ–∫ –Ω–µ –≤—ã—è–≤–ª–µ–Ω–æ, –Ω–æ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å –º–µ—Å—Ç–æ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏.';
    }
    
    return `–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã: ${weaknesses.join('; ')}. –≠—Ç–∏ –æ—à–∏–±–∫–∏ —á–∞—Å—Ç–æ —Å–≤—è–∑–∞–Ω—ã —Å –Ω–µ–¥–æ–æ—Ü–µ–Ω–∫–æ–π –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π.`;
}

function generateRecommendations() {
    const changes = gameState.changes;
    const recommendations = [];
    
    if (changes.gdp < 0) {
        recommendations.push('—Ñ–æ–∫—É—Å –Ω–∞ —Å—Ç–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏–∏ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–≥–æ —Ä–æ—Å—Ç–∞ —á–µ—Ä–µ–∑ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏');
    }
    if (changes.unemployment > 2) {
        recommendations.push('–∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏, –≤–∫–ª—é—á–∞—è –ø–µ—Ä–µ–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –º–∞–ª–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞');
    }
    if (changes.cpi > 2) {
        recommendations.push('–±–æ–ª–µ–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–∞—è —Ñ–∏—Å–∫–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∏–Ω—Ñ–ª—è—Ü–∏–æ–Ω–Ω–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è');
    }
    if (gameState.trust < 50) {
        recommendations.push('–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∞–º –∏ –º–Ω–æ–≥–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–º—É —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤—É –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–≤–µ—Ä–∏—è');
    }
    
    recommendations.push('–±–æ–ª–µ–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –∏ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π —Ç–µ–æ—Ä–∏–∏ –ø—Ä–∏ –ø—Ä–∏–Ω—è—Ç–∏–∏ —Ä–µ—à–µ–Ω–∏–π');
    recommendations.push('—É—á–µ—Ç –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π –ø—Ä–∏ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏');
    
    return `–í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: ${recommendations.join('; ')}. –ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ —Ç—Ä–µ–±—É–µ—Ç –±–∞–ª–∞–Ω—Å–∞ –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ü–µ–ª—è–º–∏ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º–∏.`;
}

function getChangeClass(value, inverse = false) {
    if (Math.abs(value) < 0.1) return 'neutral';
    if (inverse) {
        return value < 0 ? 'positive' : 'negative';
    } else {
        return value > 0 ? 'positive' : 'negative';
    }
}

function getTrustExplanation() {
    const trust = gameState.trust;
    if (trust >= 80) {
        return "–û—Ç–ª–∏—á–Ω–æ–µ –¥–æ–≤–µ—Ä–∏–µ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞. –í–∞—à–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ –±—ã–ª–∞ –≤–∑–≤–µ—à–µ–Ω–Ω–æ–π –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ–π, —á—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –±—É–¥—É—â–∏—Ö —Ç–æ—Ä–≥–æ–≤–æ-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–≥–ª–∞—à–µ–Ω–∏–π.";
    } else if (trust >= 60) {
        return "–•–æ—Ä–æ—à–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è. –í —Ü–µ–ª–æ–º –≤–∞—à–∏ —Ä–µ—à–µ–Ω–∏—è –±—ã–ª–∏ —Ä–∞–∑—É–º–Ω—ã–º–∏ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º–∏, —Ö–æ—Ç—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤—ã–∑–≤–∞–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –æ–ø–∞—Å–µ–Ω–∏—è —É —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤.";
    } else if (trust >= 40) {
        return "–°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–µ–Ω–∏—è –±—ã–ª–∏ –≤–æ—Å–ø—Ä–∏–Ω—è—Ç—ã –∫–∞–∫ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –∏–ª–∏ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ, —á—Ç–æ –º–æ–∂–µ—Ç –æ—Å–ª–æ–∂–Ω–∏—Ç—å –±—É–¥—É—â–∏–µ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã –∏ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–µ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ.";
    } else if (trust >= 20) {
        return "–ù–∏–∑–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è. –ú–Ω–æ–≥–∏–µ —Ä–µ—à–µ–Ω–∏—è –±—ã–ª–∏ –≤–æ—Å–ø—Ä–∏–Ω—è—Ç—ã –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ, —á—Ç–æ —Å–µ—Ä—å–µ–∑–Ω–æ –ø–æ–¥—Ä—ã–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –≤–∑–∞–∏–º–æ–≤—ã–≥–æ–¥–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞.";
    } else {
        return "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–æ–µ –¥–æ–≤–µ—Ä–∏–µ. –í–∞—à–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ —Å–µ—Ä—å–µ–∑–Ω–æ –ø–æ–¥–æ—Ä–≤–∞–ª–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∏–∑–æ–ª—è—Ü–∏–∏ –∏ –æ—Ç–≤–µ—Ç–Ω—ã–º —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–º –º–µ—Ä–∞–º.";
    }
}

function getScoreDescription() {
    const score = gameState.finalScore;
    if (score >= 80) {
        return "–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ! –í—ã –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç–µ –≥–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ –∏ –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏–∫–∏.";
    } else if (score >= 60) {
        return "–•–æ—Ä–æ—à–æ! –í–∞—à–∞ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–∫–∞–∑–∞–ª–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.";
    } else if (score >= 40) {
        return "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ. –ï—Å—Ç—å –∫–∞–∫ —É—Å–ø–µ—Ö–∏, —Ç–∞–∫ –∏ –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è.";
    } else if (score >= 20) {
        return "–ù–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤.";
    } else {
        return "–ö—Ä–∏—Ç–∏—á–Ω–æ! –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑—É—á–∏—Ç—å –æ—Å–Ω–æ–≤—ã —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π —Ç–µ–æ—Ä–∏–∏ –∏ —Ç–æ—Ä–≥–æ–≤–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏.";
    }
}

function createFinalChart() {
    const canvas = document.getElementById('finalChart');
    if (!canvas) return;
    
    const ctx = canvas.getContext('2d');
    const labels = ['–°—Ç–∞—Ä—Ç'];
    gameState.history.forEach((_, index) => {
        labels.push(`–•–æ–¥ ${index + 1}`);
    });
    
    const gdpData = [gameData.baseState.gdpIdx];
    const expData = [gameData.baseState.expIdx];
    const impData = [gameData.baseState.impIdx];
    
    gameState.history.forEach(h => {
        gdpData.push(h.state.gdpIdx);
        expData.push(h.state.expIdx);
        impData.push(h.state.impIdx);
    });
    
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [
                {
                    label: '–í–í–ü –∏–Ω–¥–µ–∫—Å',
                    data: gdpData,
                    borderColor: '#1FB8CD',
                    backgroundColor: '#1FB8CD20',
                    borderWidth: 2,
                    tension: 0.1
                },
                {
                    label: '–≠–∫—Å–ø–æ—Ä—Ç –∏–Ω–¥–µ–∫—Å',
                    data: expData,
                    borderColor: '#FFC185',
                    backgroundColor: '#FFC18520',
                    borderWidth: 2,
                    tension: 0.1
                },
                {
                    label: '–ò–º–ø–æ—Ä—Ç –∏–Ω–¥–µ–∫—Å',
                    data: impData,
                    borderColor: '#B4413C',
                    backgroundColor: '#B4413C20',
                    borderWidth: 2,
                    tension: 0.1
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: true,
                    position: 'top'
                }
            },
            scales: {
                y: {
                    beginAtZero: false,
                    grid: {
                        color: getComputedStyle(document.documentElement)
                            .getPropertyValue('--color-card-border').trim()
                    },
                    ticks: {
                        color: getComputedStyle(document.documentElement)
                            .getPropertyValue('--color-text-secondary').trim()
                    }
                },
                x: {
                    grid: {
                        color: getComputedStyle(document.documentElement)
                            .getPropertyValue('--color-card-border').trim()
                    },
                    ticks: {
                        color: getComputedStyle(document.documentElement)
                            .getPropertyValue('--color-text-secondary').trim()
                    }
                }
            }
        }
    });
}

function newGame() {
    // –£–Ω–∏—á—Ç–æ–∂–∞–µ–º —Å—Ç–∞—Ä—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏
    Object.values(gameState.charts).forEach(chart => {
        if (chart && chart.destroy) {
            chart.destroy();
        }
    });
    
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
    gameState = {
        currentScreen: 'start',
        selectedCountry: null,
        gameMode: 'normal',
        totalSteps: 15,
        currentTurn: 0,
        currentScenario: null,
        selectedChoice: null,
        economicState: { ...gameData.baseState },
        trust: 50,
        history: [],
        charts: {},
        usedScenarios: [],
        theme: gameState.theme, // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–º—É
        scenarioSequence: [],
        randomEventsEnabled: true,
        detailedLog: []
    };
    
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º UI
    document.querySelectorAll('.country-card').forEach(card => {
        card.classList.remove('selected');
    });
    
    document.querySelectorAll('input[name="gameMode"]').forEach(radio => {
        radio.checked = radio.value === 'normal';
    });
    
    updateStartButton();
    showScreen('start');
}

function exportToPDF() {
    const studentName = document.getElementById('studentName').value.trim();
    const studentGroup = document.getElementById('studentGroup').value.trim();
    
    if (!studentName || !studentGroup) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –§–ò–û –∏ –≥—Ä—É–ø–ø—É –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ PDF');
        return;
    }
    
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
    doc.setFont('helvetica');
    
    const country = gameData.countries[gameState.selectedCountry];
    const state = gameState.economicState;
    
    // –ó–∞–≥–æ–ª–æ–≤–æ–∫
    doc.setFontSize(16);
    doc.text('OTCHET PO SIMULYACII "TORGOVYE VOJNY"', 105, 20, { align: 'center' });
    
    // –§–ò–û –∏ –≥—Ä—É–ø–ø–∞
    doc.setFontSize(12);
    doc.text(`FIO: ${studentName}`, 20, 35);
    doc.text(`Gruppa: ${studentGroup}`, 20, 45);
    doc.text(`Data: ${new Date().toLocaleDateString('ru-RU')}`, 20, 55);
    
    // –í—ã–±—Ä–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∞
    doc.setFontSize(14);
    doc.text(`Strana: ${country.name}`, 20, 70);
    doc.setFontSize(10);
    doc.text(`Slozhnost': ${country.difficulty} (+${country.bonus} ballov)`, 20, 80);
    
    // –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞
    doc.setFontSize(14);
    doc.text(`ITOGOVAYA OCENKA: ${gameState.finalScore}/100`, 105, 95, { align: 'center' });
    
    // –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
    doc.setFontSize(12);
    doc.text('FINAL\'NYE POKAZATELI:', 20, 110);
    doc.setFontSize(10);
    doc.text(`VVP indeks: ${state.gdpIdx.toFixed(1)} (izmenenie: ${formatChange(gameState.changes.gdp)})`, 20, 120);
    doc.text(`Eksport indeks: ${state.expIdx.toFixed(1)} (izmenenie: ${formatChange(gameState.changes.exp)})`, 20, 130);
    doc.text(`Import indeks: ${state.impIdx.toFixed(1)} (izmenenie: ${formatChange(gameState.changes.imp)})`, 20, 140);
    doc.text(`Inflyaciya: ${state.cpi.toFixed(1)}% (izmenenie: ${formatChange(gameState.changes.cpi, '%')})`, 20, 150);
    doc.text(`Bezrabotica: ${state.unemployment.toFixed(1)}% (izmenenie: ${formatChange(gameState.changes.unemployment, '%')})`, 20, 160);
    doc.text(`Doverie: ${Math.round(gameState.trust)}`, 20, 170);
    
    // –†–∞–∑–±–∏–≤–∫–∞ –æ—Ü–µ–Ω–∫–∏
    doc.setFontSize(12);
    doc.text('STRUKTURA OCENKI:', 20, 185);
    doc.setFontSize(10);
    const breakdown = gameState.scoreBreakdown;
    doc.text(`Bazovye ochki: ${breakdown.baseScore}/60`, 20, 195);
    doc.text(`Bonus za slozhnost': ${breakdown.countryBonus}/15`, 20, 205);
    doc.text(`Kachestvo reshenij: ${breakdown.performanceBonus}/20`, 20, 215);
    doc.text(`Posledovatel'nost': ${breakdown.consistencyBonus}/5`, 20, 225);
    
    // –ö—Ä–∞—Ç–∫–∏–π –∞–Ω–∞–ª–∏–∑
    doc.setFontSize(12);
    doc.text('KRATKIJ ANALIZ:', 20, 240);
    doc.setFontSize(9);
    
    // –†–∞–∑–±–∏–≤–∞–µ–º –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–∏ (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–ª—è PDF)
    const analysis = `Obshchaya ocenka: ${getScoreDescription()}`;
    const lines = doc.splitTextToSize(analysis, 170);
    let yPos = 250;
    lines.slice(0, 4).forEach(line => { // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫
        doc.text(line, 20, yPos);
        yPos += 8;
    });
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ PDF
    doc.save(`Torgovye_vojny_${studentName.replace(/\s+/g, '_')}_${studentGroup}.pdf`);
}

function formatChange(value, suffix = '') {
    const sign = value > 0 ? '+' : '';
    return `${sign}${value.toFixed(1)}${suffix}`;
}